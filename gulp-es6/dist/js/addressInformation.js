"use strict";Zepto(function(e){function t(){showLoading(),ant.getSessionData({keys:["reciptiensAddrID","recName","recNumber","recProvinceCode","recCityCode","recAreaCode","recStreet","recAddress","senderAddrID","sendName","sendNumber","sendProvinceCode","sendCityCode","sendAreaCode","sendStreet","sendAddress","serviceAuthStatus","receiverCount","senderCount","real_sendNumber","real_recNumber","real_sendName","real_recName","addressGoodsOneValue","addressGoodsOneIndex"]},function(t){C=t.data.real_recNumber||"",o=t.data.real_sendNumber||"",c=t.data.real_sendName||"",_=t.data.real_recName||"",D=t.data.addressGoodsOneIndex||"",x=t.data.addressGoodsOneValue||"",r=t.data.senderAddrID||"",i=t.data.sendName||"",n=t.data.sendNumber||"",l=t.data.sendProvinceCode||"",u=t.data.sendCityCode||"",p=t.data.sendAreaCode||"",m=getAreaNameByCode(p).replace(/\s/g,""),g=m,h=t.data.sendAddress||"",v=t.data.reciptiensAddrID||"",N=t.data.recName||"",f=t.data.recNumber||"",y=t.data.recProvinceCode||"",S=t.data.recCityCode||"",w=t.data.recAreaCode||"",b=getAreaNameByCode(w).replace(/\s/g,""),A=b,I=t.data.recAddress||"",k=t.data.receiverCount||0,O=t.data.senderCount||0,d(),function(){var t=e(".wpWeight").attr("data-weight_value");if(console.log("resumeWeightData"),console.log(t+"+++"+D+"++"+x),console.log(x===t),""===D)return;if(x===t)return;e(".wpWeight").attr("data-weight_id",D),e(".wpWeight").attr("data-weight_value",x),e("#goodsweight").text(JSON.parse(JSON.stringify(x)))}(),hideLoading(),ant.setSessionData({data:{edit_senderAddrID:r,edit_sendName:c,edit_sendNumber:o,edit_sendAddress:h,edit_sendProvinceCode:l,edit_sendCityCode:u,edit_sendAreaCode:p,edit_street:g,edit_reciptiensAddrID:v,edit_recName:_,edit_recNumber:C,edit_recAddress:I,edit_recProvinceCode:y,edit_recCityCode:S,edit_recAreaCode:w,edit_recStreet:A}})}),ant.setSessionData({data:{filterCompanyId:[],productTypeId:"",productTypeName:"",presetWeight:"",presetWeightPrice:"",extraWeightUnit:"",extraWeightPrice:"",goodsOneValue:"",goodsOneIndex:"",goodstypeValue:"",dayValue:"",timeValue:"",timeDate:"",remarkContent:""}})}function d(){i&&""!=i?(e(".send_where").css({display:"none",color:"#888","padding-top":"0","padding-bottom":"0"}),e(".sendTitle").css({display:"block"}),e(".senddesc").css({display:"-webkit-box"}),e(".sender-name").text(i),e(".sender-number").text(n),e(".senddesc").attr("data-id",r),e(".senddesc").attr("data-provinceNo",l),e(".senddesc").attr("data-cityNo",u),e(".senddesc").attr("data-areaNo",p),e(".senddesc").text(g+h)):(e(".send_where").css({display:"block",color:"#888","padding-top":".15rem","padding-bottom":".15rem"}),e(".sendTitle").css({display:"none"}),e(".senddesc").css({display:"none"})),N&&""!=N?(e(".recp_where").css({display:"none",color:"#666;","padding-top":"0","padding-bottom":"0"}),e(".recTitle").css({display:"block"}),e(".recdesc").css({display:"-webkit-box"}),e(".recp-name").text(N),e(".recp-number").text(f),e(".recdesc").attr("data-id",v),e(".recdesc").attr("data-provinceNo",y),e(".recdesc").attr("data-cityNo",S),e(".recdesc").attr("data-areaNo",w),e(".recdesc").text(A+I)):(e(".recp_where").css({display:"block",color:"#888;","padding-top":".15rem","padding-bottom":".15rem"}),e(".recTitle").css({display:"none"}),e(".recdesc").css({display:"none"}))}function a(t,d,a){document.addEventListener("AlipayJSBridgeReady",function(){var s={scopeNicks:["auth_logis_platform"]};"sit"==env&&(s={scopeNicks:["auth_logis_platform"],appId:"2017010904949252"}),AlipayJSBridge.call("getAuthCode",s,function(s){if(s.authcode){console.log("认证成功 "+s.authcode);!function(t,d,a,s){var r={authCode:t,addrType:a},i=jUrl+"/ep/address/service_auth";e.axs(i,r,function(e){e.meta.success&&"0000"==e.meta.code&&(console.log("tempData "+s),"AR1040"==d?"1"==s?pushWindow("send-address.html?edit=write",!0):"0"==e.result?pushWindow("send-address.html",!0):pushWindow("select-sender.html",!0):"AR1050"==d&&("2"==s?pushWindow("recipient-address.html?edit=write",!0):"0"==e.result?pushWindow("recipient-address.html",!0):pushWindow("select-recipient.html",!0)))})}(s.authcode,t,d,a)}})})}FastClick.attach(document.body),ant.call("setTitle",{title:"寄收件地址"});var s,r="",i="",n="",o="",c="",l="",u="",p="",m="",g="",h="",v="",N="",f="",C="",_="",y="",S="",w="",b="",A="",I="",O=0,k=0,J="",D="",x="";ant.on("resume",function(e){t()}),showLoading(),ant.getSessionData({keys:["epCompanyId","serviceAuthStatus"]},function(t){J=t.data.epCompanyId||"",serviceAuthStatus=t.data.serviceAuthStatus||"";var D=jUrl+"/ep/address/index";e.axs(D,{},function(t){if(t.meta.success)var D=setInterval(function(){if(iosProvinces){var x=t.result.sender,W=t.result.receiver;s=t.result.date,console.log(s),O=t.result.senderCount,k=t.result.receiverCount,null!=x&&(r=x.id,i=x.name,c=x.realName,n=x.mobile,o=x.realMobile,l=x.provinceCode,u=x.cityCode,p=x.districtCode,m=getAreaNameByCode(p).replace(/\s/g,""),g=m,h=x.address),null!=W&&(v=W.id,N=W.name,_=W.realName,f=W.mobile,C=W.realMobile,y=W.provinceCode,S=W.cityCode,w=W.districtCode,b=getAreaNameByCode(w).replace(/\s/g,""),A=b,I=W.address),ant.setSessionData({data:{filterCompanyId:[],senderAddrID:r,sendName:i,real_sendName:c,sendNumber:n,real_sendNumber:o,sendProvinceCode:l,sendCityCode:u,sendAreaCode:p,sendStreet:g,sendAddress:h,edit_senderAddrID:r,edit_sendName:c,edit_sendNumber:o,edit_sendAddress:h,edit_sendProvinceCode:l,edit_sendCityCode:u,edit_sendAreaCode:p,edit_street:g,reciptiensAddrID:v,recName:N,real_recName:_,recNumber:f,real_recNumber:C,recProvinceCode:y,recCityCode:S,recAreaCode:w,recStreet:A,recAddress:I,receiverCount:k,senderCount:O,edit_reciptiensAddrID:v,edit_recName:_,edit_recNumber:C,edit_recAddress:I,edit_recProvinceCode:y,edit_recCityCode:S,edit_recAreaCode:w,edit_recStreet:A}}),J||(e(".wpWeight").show(),e("#weightTip").addClass("weightTip"),function(t){for(var d in t){var a="TDY"==d?"今天":"TOM"==d?"明天":"后天",s=t[d][0]+"点左右";ant.setSessionData({data:{addressDayValue:JSON.parse(JSON.stringify(a)),addressTimeValue:JSON.parse(JSON.stringify(s)),addressTimeDate:JSON.parse(JSON.stringify(a+s))}}),e("#timeDate").html(JSON.parse(JSON.stringify(a+"<span style='padding-left:.05rem;'></span>"+s))),e(".day1").val(JSON.parse(JSON.stringify(a))),e(".time1").val(JSON.parse(JSON.stringify(s)));break}}(s),function(t){var d=document.querySelector("#weightId"),a=e(".wpWeight");a.click(function(){for(var s=a.attr("data-weight_id"),r=(a.attr("data-weight_value"),[]),i=0;i<t.length;i++)r.push({id:i.toString(),value:t[i]});var n={title:"",itemHeight:35,headerHeight:42,cssUtil:"px",oneLevelId:s,callback:function(t){d.value=t.id,a.attr("data-weight_id",t.id),a.attr("data-weight_value",t.value),e("#goodsweight").text(JSON.parse(JSON.stringify(t.value)));var s=/^[0-9\.]+/g.exec(t.value);e(".goodsweightNum").val(s),ant.setSessionData({data:{addressGoodsOneValue:JSON.parse(JSON.stringify(t.value)),addressGoodsOneIndex:JSON.parse(JSON.stringify(t.id))}})}};new IosSelect(1,[r],n)})}(function(){ant.setSessionData({data:{addressGoodsOneValue:"0.5公斤及以下",addressGoodsOneIndex:"0"}});for(var t=[],d=0;d<100;d++){var a=.5+.5*d;a+=0==d?" 公斤及以下":99==d?" 公斤及以上":" 公斤",t.push(a)}return e(".wpWeight").attr("data-weight_id","0"),e(".wpWeight").attr("data-weight_value",t[0]),t}()),function(){console.log(s);var t=document.querySelector("#dateId"),d=document.querySelector("#timeId"),a=e("#selectTime");a.unbind(),a.click(function(){var r=[],i=0,n=[];for(var o in s){var c="TDY"==o?"今天":"TOM"==o?"明天":"后天";r.push({id:i.toString(),value:c,parentId:"0"});for(var l=s[o],u=0;u<l.length;u++)n.push({id:(u+10).toString(),value:l[u]+"点左右",parentId:i.toString()});i++}var p=a.attr("data-date_id"),m=(a.attr("data-date_value"),a.attr("data-time_id")),g=(a.attr("data-time_value"),{title:"",itemHeight:35,headerHeight:42,cssUtil:"px",relation:[1,1,1,1],oneLevelId:p,twoLevelId:m,callback:function(s,r){t.value=s.id,d.value=r.id,a.attr("data-date_id",s.id),a.attr("data-date_value",s.value),a.attr("data-time_id",r.id),a.attr("data-time_value",r.value),e("#timeDate").html(JSON.parse(JSON.stringify(s.value+"<span style='padding-left:.05rem;'></span>"+r.value))),e(".day1").val(JSON.parse(JSON.stringify(s.value))),e(".time1").val(JSON.parse(JSON.stringify(r.value))),ant.setSessionData({data:{addressDayValue:JSON.parse(JSON.stringify(s.value)),addressTimeValue:JSON.parse(JSON.stringify(r.value)),addressTimeDate:JSON.parse(JSON.stringify(s.value+r.value))}}),checkInf()}}),h=[r,n];new IosSelect(2,h,g)})}()),d(),function(t){e(".sendaddressClick").click(function(){if(BizLog.call("info",{spmId:"a106.b2100.c4586.d7092",actionId:"clicked"}),console.log("sendAddress-btn  touchend"),"0"==t)return console.log("serviceAuthStatus "+t),void a(selectSUid,"1");O>0?pushWindow("select-sender.html",!0):pushWindow("send-address.html",!0)}),e(".sendClick").click(function(){if(BizLog.call("info",{spmId:"a106.b2100.c4586.d7091",actionId:"clicked"}),console.log("sendClick  touchend"),"0"==t)return console.log("serviceAuthStatus "+t),void a(selectSUid,"1","1");pushWindow("send-address.html?edit=write")}),e(".recpaddressClick").click(function(){BizLog.call("info",{spmId:"a106.b2100.c4587.d7094",actionId:"clicked"}),"0"!=t?k>0?pushWindow("select-recipient.html",!0):pushWindow("recipient-address.html",!0):a(selectRUid,"2")}),e(".recpClick").click(function(){if(BizLog.call("info",{spmId:"a106.b2100.c4587.d7093",actionId:"clicked"}),console.log("recpClick  touchend"),"0"==t)return console.log("serviceAuthStatus "+t),void a(selectRUid,"2","2");pushWindow("recipient-address.html?edit=write")}),hideLoading()}(serviceAuthStatus),e("#btn-address-submit").click(function(){if(BizLog.call("info",{spmId:"a106.b2100.c4588.d7095",actionId:"clicked"}),p)if(w)if(J){var t={logisMerchId:J,snderDstrCode:p,rcvrDstrCode:w},d=jUrl+"/ep/address/judge_comp_service_area";e.axs(d,t,function(e){"0000"==e.meta.code&&(e.result.isServicing?pushWindow("information-fill.html",!0):pushWindow("select-express.html",!0))})}else pushWindow("select-express.html?isServicing=1",!0);else toast({text:"请完善收件地址"});else toast({text:"请完善寄件地址"})}),hideLoading(),clearInterval(D)}},600)})}),isAndroid&&e(".express_address_book").css("border-left","1px solid #ddd")});