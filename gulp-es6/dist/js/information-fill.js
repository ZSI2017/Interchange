"use strict";showLoading(),Zepto(function(e){function t(){return"请选择"!=e("#timeDate").text()&&("请选择"!=e("#goodstype").text()&&(""!=e(".goodsweightNum").val()&&(!!e("#defaultCheckBox").hasClass("defaultSelect")&&(e(".single_btn").removeClass("disabled"),!0))))}FastClick.attach(document.body);var a,i,o,s,n,r,d,l,c,m,p,u,g,h,f,v,b,y,x,C,N,I,k,T,S=!0,_=[],w=getUrlParam("isCompanyService")||"",O=/^[0-9\.]+/g,D=!0,A=!1;ant.setSessionData({data:{fromInformation:"0"}}),ant.on("resume",function(t){A=!0,D=!0,e(".single_btn").removeClass("loading"),e(".single_btn").html("立即下单"),e(".single_btn").click(function(){e(".single_btn").hasClass("disabled")||ant.getSessionData({keys:["fromInformation"]},function(t){A&&"1"==t.data.fromInformation&&(e(".once_order").html(""),e(".once_order_html").html('<div class="am-dialog-wrap" role="document" style="margin-top:0.25rem;padding:.13rem 0 .15rem;"><div class="am-dialog-img"><img src="https://expressprod.oss-cn-hangzhou.aliyuncs.com/mobile/img/cancelWarning.png" alt="图片描述"></div><div class="am-dialog-body" style="padding:0.02rem 0.2rem 0;margin:0 auto;"><p class="am-dialog-brief" style="font-size:0.15rem;color:black">你刚才已经下单成功<br/>确定再下一单吗？</p></div><div class="am-dialog-footer" style="padding-top:0.15rem;"><a class="am-dialog-button continue_order" role="button" style="border:1px solid #108ee9;border-radius:5px;margin-right:0.05rem;color:#108ee9;height:.41rem;line-height:1">仍然下单</a><a class="am-dialog-button Ierror" role="button" style="background:#108ee9;color:#fff;border-radius:5px;margin-left:0.05rem;height:.41rem;line-height:1">我点错了</a></div></div>'))})})}),ant.getSessionData({keys:["filterCompanyId","epCompanyId","sendAreaCode","recAreaCode","epCompanyName","cityCode","productTypeId","presetWeight","presetWeightPrice","extraWeightUnit","extraWeightPrice","epCompanyId","reciptiensAddrID","recName","recNumber","recProvinceCode","recCityCode","recAreaCode","recStreet","recAddress","senderAddrID","sendName","sendNumber","real_sendNumber","real_recNumber","sendProvinceCode","sendCityCode","real_sendName","real_recName","sendAreaCode","sendStreet","sendAddress","dayValue","timeValue","timeDate","goodstypeValue","goodsOneValue","goodsOneIndex","addServiceArrs","remarkContent","epCompanyNo","acceptOrderFrom","acceptOrderTo","merchantName","imgsrc","addressGoodsOneValue","addressGoodsOneIndex","addressDayValue","addressTimeValue"]},function(S){T=S.data.filterCompanyId,k=S.data.sendAddress,I=S.data.real_sendName,N=S.data.real_recName,d=S.data.sendAreaCode,l=S.data.recAreaCode,i=S.data.epCompanyId,a=S.data.epCompanyName,o=S.data.productTypeId,s=S.data.epCompanyNo,n=S.data.acceptOrderFrom,r=S.data.acceptOrderTo,c=S.data.senderAddrID,m=S.data.reciptiensAddrID,C=S.data.imgsrc,S.data.cityCode,ant.call("setTitle",{title:"完善寄件信息"}),function(t){var a=template("sendTemplate",t);document.getElementById("sendId").innerHTML=a;var i=template("recpAddressTemplate",t);document.getElementById("recAddressId").innerHTML=i;var o=t.sendName,s=t.recName;e(".data-senderName").html(o),e(".data-recipientsName").html(s)}(S.data),S.data.dayValue,S.data.timeValue,S.data.timeDate,S.data.goodstypeValue;var D=S.data.addressGoodsOneValue||"",A=S.data.addressGoodsOneIndex||"",P=S.data.addressDayValue||"",W=S.data.addressTimeValue||"",F=(S.data.goodsOneValue,S.data.goodsOneIndex,S.data.addServiceArrs||""),M=S.data.remarkContent||"";!function(i,s,n,r,d,l,c,m,N,I,S,D,A,z,F,M){z?(e("#text-content").val(z),e("#text-content").css("color","#000")):(e("#text-content").val("其他要求请在此备注(选填)"),e("#text-content").css("color","#ccc")),t();var B={snderAddress:k,logisMerchCode:i,acceptOrderFrom:d,acceptOrderTo:l,logisMerchId:parseInt(s),snderDstrCode:n,rcvrDstrCode:r,bookedDay:"今天"==P?"TDY":"明天"==P?"TOM":"AFT",bookedHour:O.exec(W)[0],isCompanyService:w};console.log("今天"==P?"TDY":"明天"==P?"TOM":"AFT"),console.log(O.exec(W));var L=jUrl+"/ep/order/index";e.axs(L,B,function(t){if(t.meta.success){var i=t.result,s="";if("2"==i.pricingMode?e(".systemPay").html('实际费用以<span style="color:#f4333c;">快递员当面确认为准</span>，在订单详情页即可完成在线支付，<span style="color:#f4333c;">不支持现金及扫码支付</span>'):e(".systemPay").html('实际费用以<span style="color:#f4333c;">快递员当面确认为准</span>，快递员录入信息后，支付宝会在订单详情生成账单提示支付，<span style="color:#f4333c;">不支持现金及扫码支付</span>'),i&&""!=i){var n=i.servicingText,r=i.goodsTypes,d=i.times,l=i.addServices;if(console.log(w+"isCompanyService"),console.log(d.isService),"1"==w&&"0"==d.isService&&setTimeout(function(){toast({text:"该时段已不可服务，请重新确认时间"})},600),b=JSON.parse(i.goodsMaxWeight),p=i.productTypes,o=i.productTypes[0].productTypeId,u=parseFloat(i.productTypes[0].presetWeight),g=parseFloat(i.productTypes[0].presetWeightPrice),h=parseFloat(i.productTypes[0].extraWeightUnit),f=parseFloat(i.productTypes[0].extraWeightPrice),v=i.productTypes[0].description,y=i.productTypes[0].discount,x=i.productTypes[0].productTypeCode,console.log("初始化选择产品类型"),J.initExpressType(p),console.log("初始化快递公司相关信息"),J.initCompanyInf(C,a,p[0].productTypeName),e("#expressId").html(p[0].productTypeName),e(".priceNum").html(u/1e3+"公斤内"+g/100+"元，每增加"+h/1e3+"公斤加收"+f/100+"元"),e(".goodsweightNum").val(u/1e3),console.log("initWeightData"),J.initWeightData(),F&&""!=F){var c,m=parseFloat(F),N=parseFloat(m)-u/1e3;e("#goodsweight").html(F),e(".goodsweightNum").val(parseFloat(F)),e(".alertInfo").find(".wpWeight").attr("data-weight_id",M.toString()),e(".alertInfo").find(".wpWeight").attr("data-weight_value",F),N<=0?(c=g,c/=100):(c=g+Math.ceil((1e3*m-u)/h)*f,c/=100),e(".estimatePrice-data").html(c.toFixed(2))}console.log("goodsOneValue"),e("#goodstype").text(r[0]),m||(e("#goodsweight").html(_[0]),e(".goodsweightNum").val(parseFloat(_[0])),e(".estimatePrice-data").html((g/100).toFixed(2))),l&&""!=l?(console.log("addService"),e(".extra_service_show").show(),e(".extra_service_txt").show(),e(".extra_service").css("padding-bottom","0.05rem"),e(".kd-info-text").css({"background-color":"#f5f5f9","border-bottom":"0"})):(e(".extra_service_show").hide(),e(".extra_service_txt").hide(),e(".extra_service").css("padding-bottom","0"),e(".remarks-class").css("backgroundSize","0 0,0 0,100% 0px,100% 1px"),e(".kd-info-text").css({"background-color":"#f5f5f9","border-bottom":"0"})),console.log(d),J.initselectDateEvent(d),J.initSelectTypeEvent(r),J.initSelectWeightEvent(_,g,u,h,f),J.initselectExpressType(),e(".timeText").text(n),e.each(l,function(e){for(var t=0;t<A.length;t++)if(A[t]==l[e])a="express_active_change";else var a="";s+='<div class="'+a+'" data-spmv="a106.b2109.c4629.d7167" style="min-width:0rem;text-align:center;width: 1.46rem;margin: 0.15rem 0rem 0.1rem 0.25rem;border: 1px #888 solid;padding: 0.02rem 0.02rem;line-height: .24rem;margin-top:0rem;">'+l[e]+"</div>"}),e(".extra_service").html(s),e(".extra_service div").click(function(){BizLog.call("info",{spmId:"a106.b2109.c4629.d7167",actionId:"clicked",params:{CompName:a}}),e(this).toggleClass("express_active_change")})}hideLoading()}},function(t){if("3214"==t.meta.code){BizLog.call("info",{spmId:"a106.b2109.c5643",actionId:"exposure"}),hideLoading(),e(".show_mask").show();var o=T;"[object Array]"!==Object.prototype.toString.call(o)&&(o=2==o.length?[]:T.slice(1,T.length-1).split(",")),o.push(i),setTimeout(function(){ant.setSessionData({data:{filterCompanyId:o}}),alert("温馨提示\n抱歉，"+a+"暂时无法服务\n换一家试试吧"),BizLog.call("info",{spmId:"a106.b2109.c5643.d8921",actionId:"clicked"}),e(".show_mask").hide(),ant.popWindow()},100)}else toast({text:t.meta.msg,type:"exception"})})}(s,i,d,l,n,r,0,0,0,0,0,0,F,M,D,A),e("#text-content").focus(function(){BizLog.call("info",{spmId:"a106.b2109.c4629.d7168",actionId:"clicked",params:{CompName:a}}),setTimeout(function(){z=!0,console.log("#text6666 "+z)},600),this.style.color="#000","其他要求请在此备注(选填)"==this.value&&(this.value="")}),e("#text-content").blur(function(){""==this.value&&(this.value="其他要求请在此备注(选填)",this.style.color="#ccc")}),e(".alertInfo").on("click","#selectTime",function(){BizLog.call("info",{spmId:"a106.b2109.c4629.d7164",actionId:"clicked",params:{CompName:a}})}),e(".alertInfo").on("click",".wpType",function(){BizLog.call("info",{spmId:"a106.b2109.c4629.d7165",actionId:"clicked",params:{CompName:a}})}),e(".alertInfo").on("click",".fwType",function(){BizLog.call("info",{spmId:"a106.b2109.c4629.d7331",actionId:"clicked",params:{CompName:a}})}),e(".alertInfo").on("click",".wpWeight",function(){BizLog.call("info",{spmId:"a106.b2109.c4629.d7166",actionId:"clicked",params:{CompName:a}})}),e(".price_rule").on("click",function(){BizLog.call("info",{spmId:"a106.b2109.c4629.d7169",actionId:"clicked",params:{CompName:a}}),e("#text-content").blur(),setTimeout(function(){ant.pushWindow({url:"price-rule.html"})},300)}),e("#defaultCheckBox").click(function(){BizLog.call("info",{spmId:"a106.b2109.c4630.d7170",actionId:"clicked",params:{CompName:a}})}),e(".service_agreement").on("click",function(){BizLog.call("info",{spmId:"a106.b2109.c4630.d7171",actionId:"clicked",params:{CompName:a}})}),e(".single_btn").click(function(){BizLog.call("info",{spmId:"a106.b2109.c4630.d7172",actionId:"clicked",params:{CompName:a}})})}),ant.getSessionData({keys:["epCompanyName"]},function(t){a=t.data.epCompanyName,e(".dialog-close-num").click(function(){BizLog.call("info",{spmId:"a106.b2109.c4855.d7604",actionId:"clicked",params:{CompName:a}}),e(".dialog-num").hide(),D=!0,e(".single_btn").removeClass("loading"),e(".single_btn").html("立即下单")}),e("#btn-kefu").click(function(){BizLog.call("info",{spmId:"a106.b2109.c4855.d7605",actionId:"clicked",params:{CompName:a}})}),e("#btn-sumbit").click(function(){BizLog.call("info",{spmId:"a106.b2109.c4855.d7606",actionId:"clicked",params:{CompName:a}}),e(".dialog-num").hide(),D=!0,e(".single_btn").removeClass("loading"),e(".single_btn").html("立即下单")})});var J=new Object({initCompanyInf:function(t,a,i){e("#companyLogo").attr("src",t),e("#companyInfName").html(a),e("#companyInfProductType").html(i)},initWeightData:function(){_=[];console.log(100);for(var e=0;e<100;e++){var t=.5+.5*e;t+=0==e?" 公斤及以下":99==e?" 公斤及以上":" 公斤",_.push(t)}},initExpressType:function(t){var a="";t.map(function(e,t){var i=e.description,o="";"-"!=i&&""!=i||(o="displayNone"),a+='<div  class=" am-list twoline" data-select="0" style="width:100%;padding:0;margin-bottom:.1rem"><div class="am-list-item expressType_border" style="background-size:0;border-radius:.05rem;padding-top:.15rem;min-height:0;padding-bottom:.135rem"><div class="am-list-thumb" data-select="1" style="width:.21rem;height:.21rem;background-size:contain;background-image: url(https://expressprod.oss-cn-hangzhou.aliyuncs.com/mobile/img/noselect.png);background-repeat: no-repeat;"></div><div class="am-list-content" style="margin-left:.05rem"><div class="am-list-title am-flexbox twocolumn" style="margin-bottom:0;line-height:1"><label class="am-flexbox-item" style="color:#000;font-size:.24rem;line-height:.24rem">'+e.productTypeName+'</label><div class="am-list-right-brief" style="color:#f4333c;font-size:.14rem;line-height:.24rem;"><span>'+e.presetWeightPrice/100+'</span><span> 元起</span></div></div><div class="am-list-brief '+o+'"style="white-space:normal;font-size:.14rem;line-height:.2rem;margin-top:0.05rem;margin-bottom:-0.02rem;">'+i+"</div></div></div></div>"}),e(".iosselect-box").html(a)},initselectExpressType:function(){var t=e(".alertInfo").find(".fwType"),a=e("#expressId").html();t.click(function(){D&&(e(".myPop").show(),e("body").on("touchmove",function(e){e.preventDefault()},!1),S&&(S=!1,isAndroid&&e(".iosselect-box").find(".am-list-item").css("border","1px solid #ddd"),e(".iosselect-box").find(".am-list-thumb").eq(0).css({"background-image":"url(https://expressprod.oss-cn-hangzhou.aliyuncs.com/mobile/img/select.png)"}),e(".iosselect-box").find(".am-list").eq(0).attr("data-select","1"),e(".iosselect-box").find(".am-list-item").eq(0).css("border-color","#108ee9"),e(".iosselect-box").find(".am-list:last").css("margin-bottom","0")))}),e(".iosselect-box").find(".am-list").map(function(t,i){e(this).on("click",function(){var t=e(this);"0"==e(this).attr("data-select")&&(t=e(this),e(".iosselect-box").find(".am-list").each(function(){e(this).attr("data-select","0"),e(this).find(".am-list-thumb").css({"background-image":"url(https://expressprod.oss-cn-hangzhou.aliyuncs.com/mobile/img/noselect.png)"}),e(this).find(".am-list-item").css("border-color","#ddd")}),e(this).attr("data-select","1"),e(this).find(".am-list-thumb").css({"background-image":"url(https://expressprod.oss-cn-hangzhou.aliyuncs.com/mobile/img/select.png)"}),e(this).find(".am-list-item").eq(0).css("border-color","#108ee9")),a=t.find("label").html(),e("#expressId").html(a),e("#companyInfProductType").html(a);var i=e(this).index();o=p[i].productTypeId,u=parseFloat(p[i].presetWeight),g=parseFloat(p[i].presetWeightPrice),h=parseFloat(p[i].extraWeightUnit),f=parseFloat(p[i].extraWeightPrice),v=p[i].description,y=parseFloat(p[i].discount),x=p[i].productTypeCode,e(".priceNum").html(u/1e3+"公斤内"+g/100+"元，每增加"+h/1e3+"公斤加收"+f/100+"元");var s=parseFloat(e("#goodsweight").html()),n=g+Math.ceil((1e3*s-u)/h)*f;n/=100,e(".estimatePrice-data").html(n.toFixed(2)),setTimeout(function(){e(".myPop").hide(),e("body").off("touchmove")},200)})}),e(".myPop").find(".close").click(function(){e(".myPop").hide(),e("body").off("touchmove")}),e(".myPop").find(".sure").click(function(){e(".myPop").hide(),e("body").off("touchmove"),e("#companyInfProductType").html(a),e("#expressId").html(a)})},initselectDateEvent:function(t){console.log(t);var a=t,i="",o="";for(value in a)Array.isArray(a[value])&&a[value].some(function(e,t){return e.hasOwnProperty("isChecked")&&"1"==e.isChecked})&&(o=value);a[o].some(function(e,t){return i=e.time,e.hasOwnProperty("isChecked")&&"1"==e.isChecked}),console.log(o),console.log(i),"TDY"!=o?e("#timeDate").css("color","#f4333c"):e("#timeData").css("color","#888");var s="<span style='padding-left:.05rem;'></span>";e("#timeDate").html(JSON.parse(JSON.stringify(("TDY"==o?"今天":"TOM"==o?"明天":"后天")+s+i))),e(".day1").val(JSON.parse(JSON.stringify("TDY"==o?"今天":"TOM"==o?"明天":"后天"))),e(".time1").val(JSON.parse(JSON.stringify(i)));document.querySelector("#dateId"),document.querySelector("#timeId");var n=this;e(".alertInfo").find("#selectTime").unbind().click(function(){if(D){e(".newDate").show(),e("body").on("touchmove",function(e){e.preventDefault()},!1),n.initDateTimes();e(".dataItem").each(function(t){a[0===t?"TDY":1===t?"TOM":"AFT"].every(function(e,t){return"1"!=e.status})?(e(this).addClass("clickDisabled"),e(this).find("img").hide(),e(this).find("span").html(e(this).find("span").html().replace("约满","")+"约满")):(e(this).removeClass("clickDisabled"),e(this).find("img").hide(),e(this).find("span").html(e(this).find("span").html().replace("约满","")))});var t="今天"==e(".day1").val()?"TDY":"明天"==e(".day1").val()?"TOM":"AFT",o=e(".time1").val(),s=(e(".dataItem").eq(0),"TDY"===t?0:"TOM"===t?1:2),r="";e(".dataItem").css("borderColor","#ddd"),e(".dataItem").eq(s).find("img.imgSelect").show(),e(".dataItem").eq(s).css("borderColor","#108ee9"),a[t].forEach(function(e,t){var a=format('<button style="float:left;padding:0;font-size:.14rem;margin-bottom:12px;width:1.08rem;height:.42rem;line-height:1" class="am-button                                      {0}"                                     {1}>                                     <span>{3}</span>                                     <p {4}                                     >{2}</p>                                     </button>',o===e.time?"":"white","1"==e.status?"":"disabled",e.time,"2"==e.status?"约满":"","2"==e.status?'style="padding-top:.03rem;"':"");r+=a}),e(".times").html(r),e(".times button").unbind().click(function(t){i=e(this).find("p").html(),e(".times button").addClass("white"),e(this).removeClass("white")})}}),e(".dataItem").unbind().click(function(){if(!e(this).hasClass("clickDisabled")){e(".dataItem").find("img.imgSelect").hide(),e(".dataItem").css("borderColor","#ddd"),e(this).find("img.imgSelect").show(),e(this).css("borderColor","#108ee9");var t=0===e(this).index()?"TDY":1===e(this).index()?"TOM":"AFT";o=t;var s="";a[t].forEach(function(e,t){var a=format('<button style="float:left;padding:0;font-size:.14rem;margin-bottom:12px;width:1.08rem;height:.42rem;line-height:1" class="am-button                  {0}"                 {1}>                 <span>{3}</span>                 <p {4}                 >{2}</p>                 </button>',(e.hasOwnProperty("isChecked")&&e.isChecked,"white"),"1"===e.status?"":"disabled",e.time,"2"===e.status?"约满":"","2"===e.status?'style="padding-top:.03rem;"':"");s+=a}),e(".times").html(s),a[t].some(function(t,a){return"1"===t.status&&(e(".times button").eq(a).removeClass("white"),i=t.time),"1"===t.status})||(i=""),e(".times button").unbind().click(function(t){i=e(this).find("p").html(),e(".times button").addClass("white"),e(this).removeClass("white")})}}),e(".newDate").find(".close").unbind().click(function(){e(".newDate").hide(),e("body").off("touchmove")}),e(".newDate").find(".sure").unbind().click(function(){""!==i&&(e(".time1").val(JSON.parse(JSON.stringify(i))),e(".day1").val(JSON.parse(JSON.stringify("TDY"==o?"今天":"TOM"==o?"明天":"后天"))),e("#timeDate").html(JSON.parse(JSON.stringify(("TDY"==o?"今天":"TOM"==o?"明天":"后天")+s+i))),"TDY"!=o?e("#timeDate").css("color","#f4333c"):e("#timeDate").css("color","#888")),e(".newDate").hide(),e("body").off("touchmove")})},initDateTimes:function(){!function(e){window.AlipayJSBridge?e&&e():document.addEventListener("AlipayJSBridgeReady",e,!1)}(function(){AlipayJSBridge.call("getServerTime",function(t){e(".dataItem p").each(function(a){e(this).html(function(e,t){var a=new Date(e);return a.setDate(a.getDate()+t),a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate()}(t.time,a))})})})},initSelectTypeEvent:function(a){var i=document.querySelector("#typeId"),o=e(".alertInfo").find(".wpType");o.click(function(){if(D){for(var s=o.attr("data-type_id"),n=(o.attr("data-type_value"),[]),r=0;r<a.length;r++)n.push({id:r.toString(),value:a[r]});var d={title:"",itemHeight:35,headerHeight:42,cssUtil:"px",oneLevelId:s,callback:function(a){i.value=a.id,o.attr("data-type_id",a.id),o.attr("data-type_value",a.value),e("#goodstype").text(JSON.parse(JSON.stringify(a.value))),ant.setSessionData({data:{goodstypeValue:JSON.parse(JSON.stringify(a.value))}}),t()}};new IosSelect(1,[n],d)}})},initSelectWeightEvent:function(){var a=document.querySelector("#weightId"),i=e(".alertInfo").find(".wpWeight");i.click(function(){if(D){for(var o=i.attr("data-weight_id"),s=(i.attr("data-weight_value"),[]),n=0;n<_.length;n++)s.push({id:n.toString(),value:_[n]});var r={title:"",itemHeight:35,headerHeight:42,cssUtil:"px",oneLevelId:o,callback:function(o){if(a.value=o.id,i.attr("data-weight_id",o.id),i.attr("data-weight_value",o.value),""==o.id){var s=1e3*parseFloat(_[0]),n=g+Math.ceil((s-u)/h)*f;n/=1e3,e(".estimatePrice-data").html(n.toFixed(2))}else{e("#goodsweight").text(JSON.parse(JSON.stringify(o.value)));var r=parseFloat(o.value),n=g+Math.ceil((1e3*r-u)/h)*f;n/=100,console.log("presetWeightPricePec :"+g),console.log("Math.ceil((weight * 1000 - presetWeight) / extraWeightUnitPec): "+Math.ceil((1e3*r-u)/h)),e(".goodsweightNum").val(r),e(".estimatePrice-data").html(n.toFixed(2)),ant.setSessionData({data:{goodsOneValue:JSON.parse(JSON.stringify(o.value)),goodsOneIndex:JSON.parse(JSON.stringify(o.value)),addressGoodsOneValue:JSON.parse(JSON.stringify(o.value)),addressGoodsOneIndex:JSON.parse(JSON.stringify(o.id))}})}t()}};new IosSelect(1,[s],r)}})}}),P=!1,z=!1;e("#text-content").bind("compositionstart",function(){console.log(" into compositionstart"),P=!0}),e("#text-content").bind("compositionend",function(){console.log(" into compositionend");var t=emojione.toShort(e(this).val());if(e(this).val(t.replace(/\:[a-z0-9_]+\:/g,"")),e(this).val().length>=51){var a=e(this).val().slice(0,50);e(this).val(a),e(".am-toast").show(),setTimeout(function(){e(".am-toast").hide()},800)}P=!1}),e("#text-content").bind("input",function(){if(console.log("into input"+P),!P){var t=emojione.toShort(e(this).val());if(e(this).val(t.replace(/\:[a-z0-9_]+\:/g,"")),e(this).val().length>=51){var a=e(this).val().slice(0,50);e(this).val(a),e(".am-toast").show(),setTimeout(function(){e(".am-toast").hide()},800)}}}),e("#text-content").bind("blur",function(){z=!1}),isAndroid&&e(window).on("scroll",function(t){console.log(z),z&&(console.log("dasdfa"),e("#text-content").blur())},!1),e("#defaultCheckBox").find("span").css({"background-image":"url(https://expressprod.oss-cn-hangzhou.aliyuncs.com/mobile/img/default-select.png)"}),e("#defaultCheckBox").click(function(){e(this).hasClass("defaultSelect")?(e(this).toggleClass("defaultSelect"),e(".single_btn").addClass("disabled"),e(this).find("span").css({"background-image":"url(https://expressprod.oss-cn-hangzhou.aliyuncs.com/mobile/img/default-noSelect.png)"})):(e(this).toggleClass("defaultSelect"),t()&&e(".single_btn").removeClass("disabled"),e(this).find("span").css({"background-image":"url(https://expressprod.oss-cn-hangzhou.aliyuncs.com/mobile/img/default-select.png)"}))}),e(".single_btn").click(function(){e(".single_btn").hasClass("disabled")||e(".once_order").show()}),e(document).on("click",".continue_order",function(){e(".once_order_two").show()}),e(document).on("click",".Ierror",function(){e(".once_order").hide()}),e(document).on("click",".Iknow",function(){if(BizLog.call("info",{spmId:"a106.b2109.c5305.d8437",actionId:"clicked"}),e(".once_order").hide(),e(".once_order_two").hide(),console.log("enableButton "+D),D){if(e(".single_btn").hasClass("disabled"))return;D=!1,e(".single_btn").addClass("loading"),e(".single_btn").attr("role","alert"),e(".single_btn").attr("aria-live","assertive"),e(".single_btn").html('<i class="icon" aria-hidden="true"></i>加载中...'),setTimeout(function(){D=!0,e(".single_btn").removeClass("loading"),e(".single_btn").html("立即下单")},7e3),function(){var s=[],n=e(".extra_service div");if(console.log("vclassArr.length: "+n.length),n&&0!=n.length){for(var r=0;r<n.length;r++)e(n[r]).hasClass("express_active_change")&&s.push(e(n[r]).text());s=s.join(",")}else s="1";console.log(s);var d=emojione.toShort(e("#text-content").val()).replace(/\:[a-z0-9_]+\:/g,"");if("其他要求请在此备注(选填)"==d&&(d=""),ant.setSessionData({data:{addServiceArr:s,remarkContent:d}}),t()){console.log("productTypeCode"+x);var l={logisMerchLog:C,senderAddrID:-1==JSON.parse(c)?0:JSON.parse(c),reciptiensAddrID:-1==JSON.parse(m)?0:JSON.parse(m),productTypeCode:x,discount:JSON.parse(y),logisMerchId:JSON.parse(i),productId:JSON.parse(o),snderName:I,snderMobile:e(".data-senderNumber").attr("real-sendnumber"),snderPrvnCode:e(".data-senderName").attr("data-provinceNo"),snderCityCode:e(".data-senderName").attr("data-cityNo"),snderDstrCode:e(".data-senderName").attr("data-areaNo"),snderStreet:"",snderAddress:e(".data-detailaddress").text(),rcvrName:N,rcvrMobile:e(".data-recipientsNumber").attr("real-recNumber"),rcvrPrvnCode:e(".data-recipientsName").attr("data-recprovinceNo"),rcvrCityCode:e(".data-recipientsName").attr("data-reccityNo"),rcvrDstrCode:e(".data-recipientsName").attr("data-recareaNo"),rcvrStreet:"",rcvrAddress:e(".data-redetailaddress").text(),bookedDay:"今天"==e(".day1").val()?"TDY":"明天"==e(".day1").val()?"TOM":"AFT",bookedTime:e(".time1").val(),goodsType:e("#goodstype").text(),goodsWeight:1e3*e(".goodsweightNum").val(),remark:d,addService:s,estimatePrice:100*JSON.parse(e(".estimatePrice-data").text())};console.log("info +"+JSON.stringify(l)),console.log("senderAddrID "+JSON.parse(c));var p=jUrl+"/ep/order/save";isNetworkAvailable||(D=!0,e(".single_btn").removeClass("loading"),e(".single_btn").html("立即下单")),e.axs(p,l,function(t){if(e(".single_btn").removeClass("loading"),e(".single_btn").html("立即下单"),"0000"==t.meta.code){if((t=t.result.orderNo)&&""!=t)var i=t;pushWindow("scuess-order.html?orderNo="+i,!1)}else ant.pushWindow({url:"single-failure.html?epCompanyName="+a})},function(t){if(D=!0,e(".single_btn").removeClass("loading"),e(".single_btn").html("立即下单"),"1820"==t.meta.code)D=!0,e(".single_btn").removeClass("loading"),e(".single_btn").html("立即下单"),setTimeout(function(){notPaidOrder(t.result.notPaidOrderNo,t.result.notPaidRemindCnt)},10);else if("1810"==t.meta.code)toast({text:"预约取件时间无效",type:"exception"});else if("1812"==t.meta.code)D=!0,e(".single_btn").removeClass("disabled"),ant.getSessionData({keys:["epCompanyName"]},function(e){a=e.data.epCompanyName,BizLog.call("info",{spmId:"a106.b2109.c4855",actionId:"exposure",params:{CompName:a}})}),e(".dialog-num").show();else if("1813"==t.meta.code)toast({text:"快递公司下单失败",type:"exception"});else if("1817"==t.meta.code){var i=t.result.times;J.initselectDateEvent(i),toast({text:"请重新确认上门时间"})}else toast({text:"创建订单失败，请重试",type:"exception"})})}}()}}),e(".service_agreement").on("click",function(){e("#text-content").blur(),setTimeout(function(){ant.pushWindow({url:"service-agreement.html"})},300)})});