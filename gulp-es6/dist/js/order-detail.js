"use strict";showLoading(),Zepto(function(e){function t(t,d,h){var v={orderNo:t},b=jUrl+"/ep/order/detail";e.axs(b,v,function(d){if(d.meta.success){if("0000"==d.meta.code){var v=d.result,b="",x="",k="",_="",N="",z="",O="",C="";if(l=v.orderId,r=v.discount,p=v.merchantCode,g=v.actCarrierCode,n=v.complainStatus,u=v.waybillNo,console.log("sdadsfasddfasd "+v.receiptAmount),""!=v||null!=v){var I=v.snderDstrName||"",S=v.rcvrDstrName||"",F=I.indexOf("市"),M=S.indexOf("市");F%2==0&&I.substring(0,F/2)==I.substring(F/2,F)&&(I=I.substring(F/2)),M%2==0&&S.substring(0,M/2)==S.substring(M/2,M)&&(S=S.substring(M/2)),_+='<div class="am-list-title" style="color:#888;font-size:.15rem;"><span>'+v.snderName+'</span><span style="padding-left:.14rem;">'+v.snderMobile+"</span></div>",_+='<div class="address_describe am-ft-gray" style="display:block" data-provinceNo="'+v.snderPrvnCode+'" data-cityNo="'+v.snderCityCode+'" data-areaNo="'+v.snderDstrCode+'">'+I+v.snderAddress+"</div>",e(".send-msg").html(_),N+='<div class="am-list-title" style="color:#888;font-size:.15rem;"><span>'+v.rcvrName+'</span><span style="padding-left:.14rem;">'+v.rcvrMobile+"</span></div>",N+='<div class="address_describe am-ft-gray" style="display:block" data-recprovinceNo="'+v.rcvrPrvnCode+'" data-reccityNo="'+v.rcvrCityCode+'" data-recareaNo="'+v.rcvrDstrCode+'">'+S+v.rcvrAddress+"</div>",e(".collect-msg").html(N);var P;""!=v.productTypeName&&null!=v.productTypeName&&(P=v.productTypeName,console.log("productTypeTempNamecli: "+P),console.log(P.length),P.length>6&&(P=P.substring(0,6))),b+=['<div class="am-list-item orderstatus_top kd-info" style="background-size: 0">','<div class="am-list-item-part pickUpCode" style="display:none;">','<div class="am-list-content am-ft-gray">取件码</div>','<div class="am-list-extra" style="color:#FF5B05">'+v.pickUpCode+"</div>","</div>",'<div class="am-list-item-part yuji-time" style="display:none;padding-top:0.04rem">','<div class="am-list-content am-ft-gray">期望上门</div>','<div class="am-list-extra" style="min-width: 2rem;max-width: 3rem;">'+v.bookedTime+"</div>","</div>",'<div class="am-list-item-part">','<div class="am-list-content am-ft-gray">订&nbsp;&nbsp;单&nbsp;&nbsp;号</div>','<div class="am-list-extra" style="min-width: 2rem;max-width: 3rem;">'+v.orderNo+"</div>","</div>",'<div class="am-list-item-part waybillNo-type" style="display:none;">','<div class="am-list-content am-ft-gray">运&nbsp;&nbsp;单&nbsp;&nbsp;号</div>','<div class="am-list-extra">'+v.waybillNo+"</div>","</div>",'<div class="am-list-item-part">','<div class="am-list-content merchantName am-ft-gray">快递公司</div>','<div class="am-list-extra">'+v.merchantName+"</div>","</div>",'<div class="am-list-item-part sys-type" style="display:none;">','<div class="am-list-content am-ft-gray">服务类型</div>','<div class="am-list-extra">'+P+"</div>","</div>",'<div class="am-list-item-part actCarrierName" style="display:none">','<div class="am-list-content am-ft-gray">承运快递</div>','<div class="am-list-extra">'+v.actCarrierName+"</div>","</div>",'<div class="am-list-item-part">','<div class="am-list-content am-ft-gray">客服电话</div>','<div class="am-list-extra"><a id="serverPhone"  data-spmv="a106.b2115.c4640.d7189" href="tel:'+v.custServiceTel+'">'+v.custServiceTel+"</a></div>","</div>","</div>",'<div class="am-list-item kd-order-item oneline sao-number" data-spmv="a106.b2115.c4640.d7333" style="background:linear-gradient(to bottom, #ddd, #ddd 33%, transparent 33%) no-repeat left top;background-size:100% 1px;text-align:center;padding: .04rem 0rem .045rem;margin:0 0.15rem;display:none;">','<div class="am-list-content"><img src="https://expressprod.oss-cn-hangzhou.aliyuncs.com/mobile/img/scan_icon.png" style="margin-right:.12rem;width: .19rem;height: .19rem;vertical-align: sub;" /><span style="font-size:.14rem;color:#108ee9;">扫描快递单查看物流信息</span></div>',"</div>",'<div class="am-list-item kd-order-item oneline wuliu" data-spmv="a106.b2115.c4640.d7334"  style="padding-top:0;padding-bottom:0;background:linear-gradient(to bottom, #ddd, #ddd 33%, transparent 33%) no-repeat left top;background-size:100% 1px;text-align:center;display:none;height: .4rem;line-height:1;margin:0 0.15rem;">','<div class="am-list-content"><img src="https://expressprod.oss-cn-hangzhou.aliyuncs.com/mobile/img/Logistics_infor_icon.png" style="margin-right:.12rem;width: .19rem;height: .19rem;vertical-align: sub;" /><span style="font-size:.14rem;color:#108ee9;">查看物流信息</span></div>',"</div>"].join(""),e(".top-list").html(b),"3"==v.logisMerchantType&&e(".merchantName").html("快递平台"),v.pickUpCode&&(e(".pickUpCode").show(),e(".pickUpCode").css("padding-top","0.04rem")),v.actCarrierName&&e(".actCarrierName").show(),clickStatus.bind(e("#serverPhone"))(),e("#serverPhone").click(function(){var a=e(this).html();BizLog.call("info",{spmId:"a106.b2115.c4640.d7189",actionId:"clicked",params:{OrderNO:t,CompPhone:a}})}),isAndroid&&e(".borderTopddd").css("border-top","1px solid #ddd"),""!=v.productTypeName&&null!=v.productTypeName?e(".sys-type").show():e(".sys-type").hide();var W=v.remark||"无",L=v.addService||"无";x+=['<div class="am-list-body">','<div class="am-list-item">','<div class="am-list-content am-ft-gray" style="font-size:.15rem;">物品类型</div>','<div class="am-ft-gray" style="font-size:.15rem;">'+v.goodsType+"</div>","</div>",'<div class="am-list-item extra-serves-data" style="padding-top:0.065rem">','<div class="am-list-content am-ft-gray" style="font-size:.15rem;">额外服务</div>','<div class="am-ft-gray" style="font-size:.15rem;">'+L+"</div>","</div>",'<div style="margin-left: .15rem;"></div>','<div class="am-list-item remark-data" style="padding: .07rem .15rem;padding-bottom:.065rem">','<div class="am-list-content am-ft-gray" style="font-size:.15rem;white-space: normal;line-height: 19px;"><span id="remarksID" style="white-space:nowrap">备注：</span><span class="orderstatus_remarks am-ft-gray" style="color:#8a8a8a">'+W+"<span></div>","</div>","</div>"].join(""),e(".basic-list").html(x),"1"==v.addService&&e(".extra-serves-data").hide(),"无"==W?(e(".orderstatus_remarks").css("float","right"),e(".orderstatus_remarks").css("color","#8a8a8a"),e("#remarksID").html("备注")):e(".orderstatus_remarks").css("float","none"),e(".data-weight").text(v.goodsWeight/1e3),e(".data-kuaidi-evaluate").text(v.estCosts),e(".data-discount").text(v.discount),e(".data-coupon").text(v.couponCosts),e(".data-paid").text(v.paidCosts),k+='<div class="am-ft-gray" style="font-size:.15rem;">支付宝在线支付</div>',"1"==v.payStatus?O+="待支付":"2"==v.payStatus?O+="支付中":"4"==v.payStatus&&(O+="支付失败");var A="",B="";"3"==v.payStatus?(console.log("receiptAmount  "+(parseFloat(v.receiptAmount)/100).toFixed(2)),B='<div class="am-list-item paid"><div class="am-list-content am-ft-black" style="font-size:.15rem;">已支付</div><div class="am-ft-black" style="font-size:.15rem;">'+(parseFloat(v.receiptAmount)/100).toFixed(2)+'元<span id="payResult"></span></div></div>',e("#cancleOrder").hide()):A='<div class="am-list-item wait-pay" style="padding-bottom:0.065rem"><div class="am-list-content am-ft-gray" style="font-size:.15rem;">支付状态</div><div class="lastpayStatus am-ft-black" style="font-size:.15rem;">'+O+"</div></div>",null!=v.couponAmount&&""!=v.couponAmount&&"3"==v.payStatus&&0!=v.couponAmount&&(N+='<div class="am-list-item youhui-coupon"  style="padding-bottom:0.065rem"><div class="am-list-content am-ft-red" style="font-size:.15rem;">优惠劵</div><div class="am-ft-red" style="font-size:.15rem;">-'+(v.couponAmount/100).toFixed(2)+"</div></div>"),"1"==v.pricingMode&&"3"==v.payStatus&&v.orderAmount-v.payableAmount!=0&&(C+='<div class="am-list-item youhui-discount"  style="padding-bottom:0.065rem"><div class="am-list-content am-ft-red" style="font-size:.15rem;">优惠折扣</div><div class="am-ft-red" style="font-size:.15rem;">-'+((v.orderAmount-v.payableAmount)/100).toFixed(2)+"</div></div>");var J=v.estimatePrice/100;z+=['<div class="am-list-item">','<div class="am-list-content am-ft-gray" style="font-size:.15rem;">支付方式</div>',k,"</div>","</div>",A,'<div class="am-list-item"  style="padding-bottom:0.065rem">','<div class="am-list-content am-ft-gray" style="font-size:.15rem;">物品重量</div>','<div class="am-ft-red" style="font-size:.15rem;"><span class="data-weight">'+v.goodsWeight/1e3+'</span><span style="padding-left:.06rem">公斤</span></div>','<input type="hidden" class="data-presetWeight" value='+v.presetWeight+" />",'<input type="hidden" class="data-presetWeightPrice" value='+v.presetWeightPrice+" />",'<input type="hidden" class="data-extraWeightUnit" value='+v.extraWeightUnit+" />",'<input type="hidden" class="data-extraWeightPrice" value='+v.extraWeightPrice+" />","</div>",C,"",'<div class="am-list-item kuaidi-evaluate" style="padding-bottom:0.065rem;background-size: .0rem .01rem,.0rem .01rem,100% 0,100% .01rem;">','<div class="am-list-content am-ft-gray" style="font-size:.15rem;">预计快递费</div>','<div class="am-ft-red data-kuaidi-evaluate" style="font-size:.15rem;">约'+J.toFixed(2)+"元</div>","</div>",B,'<div class="am-list-footer footer-des" style="padding: .115rem .15rem;padding-top:.07rem;padding-bottom:.12rem;">','<div class="am-ft-12">',"首重"+v.presetWeightPrice/100+"元，续重"+v.extraWeightPrice/100+'元<a class="am-ft-12 price_rule" data-spmv="a106.b2115.c4640.d7190" style="padding-left: .15rem;" >如何计算？</a>',"</div>",'<p style="margin-top:.31rem;color:#566b96;font-size:13px;text-align:center;"><span class="helpCenter" data-spmv="a106.b2115.c4640.d7191">帮助中心</span></p>',"</div>"].join("");switch(v.orderStatus){case"1":!function(t,a){e(".order-wait-desc").text("下单成功，待快递公司接单"),e(".order-wait-desc").css({color:"#ff5b05"}),e(".yuji-time").show(),"1"!=t.pricingMode&&e(".order-notice").hide();e(".data-person-list").hide(),e(".extra-list").html(a),e(".express_distance").css("padding-bottom","0")}(v,z);break;case"2":s(v,z);break;case"3":o(v,k);break;case"4":!function(t,a){e(".order-wait-desc").css({color:"grey"}),e(".order-wait-desc").text("已取消"),e(".order-wait-desc").addClass("am-ft-gray"),e(".footer-des").html(""),e(".footer-des").hide(),e(".extra-list").html(a),e(".yuji-time").show(),e(".pickUpCode").hide(),e(".pickUpCode").css("padding-top","0"),e(".show-order-submit").hide(),e(".order-notice").hide(),e(".data-person-list").show(),e("#cancleOrder").hide(),e(".express_distance").css("padding-bottom","0"),console.log(y);var i="",s="",o="",d="";if("1"==t.accepterType){var l=t.courierHeardUrl;void 0!==l&&""!=l||(l="https://expressprod.oss-cn-hangzhou.aliyuncs.com/mobile/img/courier_head_icon.png"),i='<div class="am-list-thumb" style="margin-right: .12rem;"><img src="'+l+'" style="width:.5rem;height:.5rem;" /></div>',s='<div class="am-list-title" style="font-size:.15rem;"><span  style="vertical-align:super;margin-bottom:2px;"  class="bizlogCourierName">'+t.courierName+'</span><span style="padding-left:.15rem;vertical-align:super;margin-bottom:2px;" class="bizlogCourierMobile">'+t.courierMobile+"</span></div>",o='<div data-spmv="a106.b2115.c4640.d7194" class="am-list-extra bizlogCourierPhone" style="overflow:visible;min-width: .36rem;width:.36rem;-webkit-box-flex: 0;-webkit-flex: 0;margin-top: .08rem;"style="min-width: .36rem;width:.36rem;-webkit-box-flex: 0;-webkit-flex: 0;margin-top: .07rem;"><a  href="tel:'+t.courierMobile+'"><img src="https://expressprod.oss-cn-hangzhou.aliyuncs.com/mobile/img/phone_icon.png" style="width:.36rem;height:.36rem;" /></a></div>'}else i='<div class="am-list-thumb" style="margin-right: .12rem;"><img src="https://expressprod.oss-cn-hangzhou.aliyuncs.com/mobile/station_head_icon.png" style="width:.5rem;height:.5rem;" /></div>',s='<div class="am-list-title" style="font-size:.15rem;"><span>'+t.siteName+'</span><span style="padding-left:.15rem;">'+t.managerMobile+"</span></div>",o='<div class="am-list-extra " style="overflow:visible;min-width: .36rem;width:.36rem;-webkit-box-flex: 0;-webkit-flex: 0;margin-top: .08rem;"><a  href="tel:'+t.managerMobile+'"><img src="https://expressprod.oss-cn-hangzhou.aliyuncs.com/mobile/img/phone_icon.png" style="width:.36rem;height:.36rem;" /></a></div>';d+='<div class="am-list-item" style="padding-top:.13rem;padding-bottom:.155rem;padding-right: .23rem;">'+i+'<div class="am-list-content address_listwhere">'+s+'<div class="am-list-brief" style="overflow:visible;height:.26rem;line-height:.26rem;"><span class="complaint_btn" data-spmv="a106.b2115.c4640.d7193">投诉</span></div></div>'+o+"</div>",t.managerMobile||t.courierMobile||(d="");e(".data-person").html(d),"1"==n&&(e(".complaint_btn").html("已投诉"),e(".complaint_btn").addClass("disabled_btn2"));"1"==t.payStatus&&e(".lastpayStatus").html("未支付")}(v,z)}}v.epCompanyId,v.epCompanyNo,v.orderTakingName,v.orderTakingNo;var U=v.merchantName;e(".data-express-show-info").html(U),m=v.timeoutStatus,console.log("data.timeoutstatus "+v.timeoutStatus),"2"==m&&(BizLog.call("info",{spmId:"a106.b2115.c4649",actionId:"exposure",params:{OrderNO:t}}),e("body").on("touchmove",function(e){e.preventDefault()},!1),refreshFlag=!1,e(".dialog-kuaidi").show()),e(".price_rule").click(function(){BizLog.call("info",{spmId:"a106.b2115.c4640.d7190",actionId:"clicked",params:{OrderNO:t}}),ant.pushWindow({url:"price-rule.html"})}),e(".single_btn").click(function(){if(BizLog.call("info",{spmId:"a106.b2115.c4640.d7332",actionId:"clicked",params:{OrderNO:t}}),console.log("data.pricingMode"+v.pricingMode),c=v.isManualPrice,e("body").on("touchmove",function(e){e.preventDefault()},!1),refreshFlag=!1,"2"==v.pricingMode)if("0"==v.isManualPrice){e(".dialog_mask").show(),console.log("weight "+e(".data-weight").text()),e(".prise_val").val(parseFloat(e(".data-weight").text()).toFixed(1)),e(".data-presetWeightPrice-number").val(e(".data-presetWeightPrice").val()),e(".data-extraWeightUnit-number").val(e(".data-extraWeightUnit").val()),e(".data-extraWeightPrice-number").val(e(".data-extraWeightPrice").val());var a=parseFloat(e(".data-weight").text()),i=JSON.parse(e(".data-presetWeightPrice-number").val());console.log(e(".data-extraWeightUnit-number").val());var s=JSON.parse(e(".data-extraWeightUnit-number").val()),o=JSON.parse(e(".data-extraWeightPrice-number").val()),d=JSON.parse(e(".data-presetWeight").val()),l=i,r=s,n=o;console.log(d+"+"+l+"+"+r+"+"+n);var m=l+Math.ceil((1e3*a-d)/r)*n;m/=100,console.log(m),e(".pay-money").html(m.toFixed(2)),e(".payment_btn").html("支付 <span style='width:2px;display: inline-block;'></span>"+e(".pay-money").text()+"元")}else"1"==v.isManualPrice&&(e("#pay-input-1").val(""),e(".dialog_mask_pay").show());else e(".dialog_mask_pay_sys").show(),e(".data-weight-sys").text(v.goodsWeight/1e3),""!=v.discountDesc&&null!=v.discountDesc?(e(".pay-sys-desc").show(),e(".pay-sys-desc").html(v.discountDesc)):e(".pay-sys-desc").hide(),e(".data-pay-sys").text(v.orderAmount/100),e(".data-pay-show").text((v.payableAmount/100).toFixed(2)),e(".payment_btn").html("支付<span style='width:7px;display: inline-block;margin-left:0.05rem'></span>"+e(".data-pay-show").text()+"元")}),e("#btn-kuaidi-sumbit").unbind(),e("#btn-kuaidi-sumbit").on("touchstart",function(){BizLog.call("info",{spmId:"a106.b2115.c4649.d7229",actionId:"clicked",params:{OrderNO:t}}),m="3",e("body").off("touchmove"),refreshFlag=!0,e(".dialog-kuaidi").hide(),i(l)}),e("#btn-kuaidi-cancel").on("touchstart",function(){BizLog.call("info",{spmId:"a106.b2115.c4649.d7228",actionId:"clicked",params:{OrderNO:t}}),m="3",e("body").off("touchmove"),refreshFlag=!0,e(".dialog-kuaidi").hide(),function(t){var a={orderId:JSON.parse(t)},i=jUrl+"/ep/order/save_pop_status";e.axs(i,a,function(e){e.meta.success})}(l)}),e("#btn-ok").unbind(),e("#btn-ok").on("click",function(){if(BizLog.call("info",{spmId:"a106.b2115.c4643.d7212",actionId:"clicked",params:{OrderNO:t}}),w=!0,!e(this).hasClass("disabled")){var i=e("#count-data").val(),s=e("#count-cancelCntLimit").val(),o=JSON.parse(i)+1;if(e(".dialog-warning").find(".am-dialog-brief").html("您当日已取消"+o+"次，若再次取消，将被限制下单操作"),console.log("click #btn-ok"),e(".extra_service .am-flexbox-item").hasClass("express_active")){var d=e(".extra_service").find(".express_active").text();e(".dialog_cancel").hide(),ant.showLoading(),a(l,d,i,s)}}}),e(".reminder_btn").click(function(){BizLog.call("info",{spmId:"a106.b2115.c4640.d7192",actionId:"clicked",params:{OrderNO:t}}),e(".reminder_btn").hasClass("disabled_btn")||(ant.showLoading(),function(t){var a={orderId:JSON.parse(t)},i=jUrl+"/ep/order/remind";e.axs(i,a,function(t){t.meta.success&&("0000"==t.meta.code?(ant.hideLoading(),toast({text:"亲，已通知快递小哥火速上门，请耐心等待哦~"}),e(".reminder_btn").addClass("disabled_btn"),e(".reminder_btn").html("已催单")):"0410"==t.meta.code&&toast({text:t.meta.msg,type:"exception"}))})}(l))}),e(".complaint_btn").click(function(a){BizLog.call("info",{spmId:"a106.b2115.c4640.d7193",actionId:"clicked",params:{OrderNO:t}}),a.preventDefault(),e(".complaint_btn").hasClass("disabled_btn")||e(".complaint_btn").hasClass("disabled_btn2")||(e("body").on("touchmove",function(e){e.preventDefault()},!1),refreshFlag=!1,e(".dialog-complain").show())}),e(".wuliu").click(function(){BizLog.call("info",{spmId:"a106.b2115.c4640.d7334",actionId:"clicked",params:{OrderNO:t}});var e=p;g&&(e=g),ant.startApp({appId:"20000754",param:{url:"/app/src/expressDetail.html?logisticsNo="+u+"&logisticsCode="+e+"&from=SendEXClient",startMultApp:"YES",appClearTop:!1},appClearTop:!1,closeCurrentApp:!1})}),e(".helpCenter").click(function(){BizLog.call("info",{spmId:"a106.b2115.c4640.d7191",actionId:"clicked",params:{OrderNO:t}}),pushWindow("alipays://platformapi/startapp?appId=20000691&url=%2Fwww%2Fsrc%2Findex.html%3Fscene%3Dapp_jijianpingtai%23%2FhallIndex",!0)}),e(".sao-number").click(function(){BizLog.call("info",{spmId:"a106.b2115.c4640.d7333",actionId:"clicked",params:{OrderNO:t}}),ant.scan({type:"bar"},function(t){var a=JSON.parse(JSON.stringify(t.barCode));e(".data-orderId").val(l),e(".dialog-saosao").show(),e(".saosao-desc").html(a)})}),"1"==v.payStatus&&"1"==v.pricingMode&&"4"!=v.orderStatus&&e(".single_btn").click(),f&&e(".single_btn").click()}else"0310"==v.meta.code?toast({text:v.meta.msg,type:"exception"}):"0311"==v.meta.code&&toast({text:v.meta.msg,type:"exception"});h&&h(),hideLoading(),e(".noticeval").html("费用以快递员当面确认为准，快递员录入信息后，支付宝会生成账单提示支付，不支持现金及扫码支付～");var T=e(".am-notice-content").width()-parseFloat(e(".am-notice-content").css("padding-left")),j=T+e(".noticeval").width()-15;e("#kong").width(T),e("#outcontent").width(j)}},function(t){if("0310"==t.meta.code){e(document.body).html('<div class="am-page-result" role="alert"><div class="am-page-result-wrap"><div class="am-page-result-pic am-icon page-nofound" aria-hidden="true"></div><div class="am-page-result-title">订单不存在</div></div></div>'),hideLoading()}else hideLoading(),toast({text:"加载出错，请重试",type:"exception"})})}function a(t,a,i,s){var o={orderId:t,cancelCause:a};console.log("调用了取消订单接口！"),isNetworkAvailable||(e("body").off("touchmove"),refreshFlag=!0,ant.hideLoading());var d=jUrl+"/ep/order/cancel/confirm";e.axs(d,o,function(t){if(t.meta.success)if(console.log(t.meta.msg),e("body").off("touchmove"),refreshFlag=!0,ant.hideLoading(),"3"==m)ant.pushWindow({url:"cancellation-order.html?orderNo="+v});else{JSON.parse(i)<JSON.parse(s)-2&&ant.pushWindow({url:"cancellation-order.html?orderNo="+v}),JSON.parse(i)==JSON.parse(s)-2?e(".dialog-warning").show():JSON.parse(i)>JSON.parse(s)-2&&(BizLog.call("info",{spmId:"a106.b2115.c4651",actionId:"exposure",params:{OrderNO:v}}),e(".dialog-num").show())}},function(t){e("body").off("touchmove"),refreshFlag=!0,ant.hideLoading(),"0214"==t.meta.code?toast({text:"订单已取件,不能取消"}):"0215"==t.meta.code?(toast({text:"订单已取消"}),window.location.reload()):toast({text:t.meta.msg})})}function i(a){console.log("into agreeChange");var s={orderId:JSON.parse(a)},o=jUrl+"/ep/order/change_express";e.axs(o,s,function(a){"0000"==a.meta.code?(e(".dialog-kuaidi").hide(),toast({text:"更换成功",type:"success"}),console.log("更换成功"),b="01",t(v)):toast({text:a.meta.msg,type:"exception"})},function(e){"0912"==e.meta.code||"0913"==e.meta.code?alert("EMS服务暂未覆盖，建议取消订单"):"0911"==e.meta.code||"0910"==e.meta.code?window.confirm("更换失败，点击确定重试")&&i(a):"0914"==e.meta.code?(alert("更换成功，EMS将为你服务"),window.location.reload()):toast({text:e.meta.msg,type:"exception"})})}function s(t,a){e(".express_distance").css("padding-bottom",".88rem"),e(".order-wait-desc").text("已安排快递员，等待取件"),e(".order-wait-desc").css({color:"#ff5b05"}),e(".yuji-time").show(),e(".yuji-time .am-list-content").html("预计上门"),e(".data-person-list").show();var i="",s="";"2"==t.pricingMode?(e(".order-notice").hide(),s+='<div class="am-button-wrap am-fixed-bottom" style="padding-top:.055rem"><div class="am-ft-center am-ft-12 am-ft-gray single_top" data-pricingMode='+t.pricingMode+" data-isManualPrice="+t.isManualPrice+' style="padding-bottom: 0.08rem;padding-top:0.005rem;color:#ccc;font-size:.14rem">请在快递员上门称重后支付，不要提前支付哟~</div><a class="am-button single_btn" data-spmv="a106.b2115.c4640.d7332" style="vertical-align:center;" data-pricingMode='+t.pricingMode+" data-isManualPrice="+t.isManualPrice+">与快递员核对完成，去支付</a></div>"):"1"==t.pricingMode&&(e(".order-notice").show(),e(".express_distance").css("padding-bottom","0")),"3"==t.payStatus?(e("#cancleOrder").hide(),e(".order-notice").hide(),e(".show-order-submit").hide(),e(".express_distance").css("padding-bottom","0")):e(".show-order-submit").html(s);var o="",d="",l="",r="";if("1"==t.accepterType){var c=t.courierHeardUrl;void 0!==c&&""!=c||(c="https://expressprod.oss-cn-hangzhou.aliyuncs.com/mobile/img/courier_head_icon.png"),d='<div class="am-list-thumb" style="margin-right: .12rem;"><img src="'+c+'" style="width:.5rem;height:.5rem;" /></div>',l='<div class="am-list-title" style="font-size:.15rem;"><span  style="vertical-align:super;margin-bottom:2px;"  class="bizlogCourierName">'+t.courierName+'</span><span style="padding-left:.15rem;vertical-align:super;margin-bottom:2px;" class="bizlogCourierMobile">'+t.courierMobile+"</span></div>",r='<div data-spmv="a106.b2115.c4640.d7194" class="am-list-extra bizlogCourierPhone" style="overflow:visible;min-width: .36rem;width:.36rem;-webkit-box-flex: 0;-webkit-flex: 0;margin-top: .08rem;"style="min-width: .36rem;width:.36rem;-webkit-box-flex: 0;-webkit-flex: 0;margin-top: .07rem;"><a  href="tel:'+t.courierMobile+'"><img src="https://expressprod.oss-cn-hangzhou.aliyuncs.com/mobile/img/phone_icon.png" style="width:.36rem;height:.36rem;" /></a></div>'}else d='<div class="am-list-thumb" style="margin-right: .12rem;"><img src="https://expressprod.oss-cn-hangzhou.aliyuncs.com/mobile/station_head_icon.png" style="width:.5rem;height:.5rem;" /></div>',l='<div class="am-list-title" style="font-size:.15rem;"><span>'+t.siteName+'</span><span style="padding-left:.15rem;">'+t.managerMobile+"</span></div>",r='<div class="am-list-extra " style="overflow:visible;min-width: .36rem;width:.36rem;-webkit-box-flex: 0;-webkit-flex: 0;margin-top: .08rem;"><a  href="tel:'+t.managerMobile+'"><img src="https://expressprod.oss-cn-hangzhou.aliyuncs.com/mobile/img/phone_icon.png" style="width:.36rem;height:.36rem;" /></a></div>';o=null!=t.remindStatus&&1==t.remindStatus?'<span class="reminder_btn disabled_btn" data-spmv="a106.b2115.c4640.d7192">已催单</span>':'<span class="reminder_btn" data-spmv="a106.b2115.c4640.d7192">催一催</span>',console.log("data.managerMobile: "+t.managerMobile||t.courierMobile),isCorrectPhoneNum(t.managerMobile||t.courierMobile)||(o=""),i+='<div class="am-list-item" style="padding-top:.13rem;padding-bottom:.155rem;padding-right: .23rem;">'+d+'<div class="am-list-content address_listwhere">'+l+'<div class="am-list-brief" style="overflow:visible;height:.26rem;line-height:.26rem;">'+o+'<span class="complaint_btn" data-spmv="a106.b2115.c4640.d7193">投诉</span></div></div>'+r+"</div>",e(".data-person").html(i),e(".extra-list").html(a),"1"==n&&(e(".complaint_btn").html("已投诉"),e(".complaint_btn").addClass("disabled_btn2")),e(".bizlogCourierPhone").click(function(){var t=e(".bizlogCourierName").html(),a=e(".bizlogCourierMobile").html();BizLog.call("info",{spmId:"a106.b2115.c4640.d7194",actionId:"clicked",params:{OrderNO:v,CourierName:t,CourierPhone:a}})})}function o(t,a){e(".data-person-list").show(),console.log("已取件 data.payStatus "+t.payStatus),e(".express_distance").css("padding-bottom",".88rem"),e("#cancleOrder").hide(),"1"==t.payStatus?(e(".order-wait-desc").text("快递员已取件，待支付"),e(".order-wait-desc").css({color:"#ff5b05"})):"3"==t.payStatus||"5"==t.payStatus?(e(".order-wait-desc").text("快递员已取件，支付完成"),e(".order-wait-desc").css({color:"#42ae55"})):(e(".order-wait-desc").text("快递员已取件"),e(".order-wait-desc").css({color:"#ff5b05"})),e(".yuji-time").hide(),e(".pickUpCode").hide(),e(".pickUpCode").css("padding-top","0"),e(".waybillNo").show(),"1"!=t.payStatus&&(e(".show-order-submit").hide(),e(".express_distance").css("padding-bottom","0")),null!=t.waybillNo&&""!=t.waybillNo?(e(".waybillNo-type").show(),e(".wuliu").show(),e(".sao-number").hide()):(e(".waybillNo-type").hide(),e(".wuliu").hide(),e(".sao-number").show());var i="",s="",o="",d="",l="",r=t.orderAmount/100,c='<div class="am-ft-12">首重'+t.presetWeightPrice/100+"元，续重"+t.extraWeightPrice/100+'元<a class="am-ft-12 price_rule" data-spmv="a106.b2115.c4640.d7190" style="padding-left: .15rem;" >如何计算？</a></div><p style="margin-top:.31rem;color:#566b96;font-size:13px;text-align:center"><span class="helpCenter" data-spmv="a106.b2115.c4640.d7191">帮助中心</span></p>';if(""!=t.productTypeName&&null!=t.productTypeName){e(".sys-type").show(),e(".server-type-show-info").show();var m=t.productTypeName;m.length>6&&(m=m.substring(0,6)),e(".server-type-show-info-data").html(m)}else e(".sys-type").hide(),e(".server-type-show-info").hide();"1"==t.pricingMode?(e(".order-notice").show(),"1"==t.payStatus&&("false"==t.isPushBill?(r=t.estimatePrice/100,e(".order-wait-desc").text("快递员已取件，账单生成中"),e(".order-wait-desc").css({color:"#ff5b05"})):(e(".order-wait-desc").text("快递员已取件，待支付"),e(".order-wait-desc").css({color:"#ff5b05"}),o+='<div class="am-button-wrap"><div class="am-ft-center am-ft-12 am-ft-red single_top" data-pricingMode='+t.pricingMode+' style="padding-bottom: 0.1rem;">请于24小时内完成支付，以免影响物品派送~</div><a class="am-button single_btn" data-spmv="a106.b2115.c4640.d7332" data-pricingMode='+t.pricingMode+'>立即支付 <span class="data-money">'+(t.payableAmount/100).toFixed(2)+"</span> 元</a></div>")),"5"==t.payStatus&&"false"==t.isPushBill&&(r=t.estimatePrice/100)):(e(".order-notice").hide(),o+='<div class="am-button-wrap am-fixed-bottom" style="padding-top:.055rem"><div class="am-ft-center am-ft-12 am-ft-gray single_top" data-pricingMode='+t.pricingMode+" data-isManualPrice="+t.isManualPrice+' style="padding-bottom: 0.08rem;padding-top:0.005rem;color:#ccc;font-size:.14rem">请在快递员上门称重后支付，不要提前支付哟~</div><a class="am-button single_btn" data-spmv="a106.b2115.c4640.d7332" style="vertical-align:center;" data-pricingMode='+t.pricingMode+" data-isManualPrice="+t.isManualPrice+">与快递员核对完成，去支付</a></div>"),"1"==t.payStatus?(s+='<div class="am-list-content am-ft-gray" style="font-size:.15rem;">支付状态</div><div class="lastpayStatus am-ft-black" style="font-size:.15rem;">待支付</div>',""==o?e(".express_distance").css("padding-bottom","0"):(e(".show-order-submit").html(o),e(".express_distance").css("padding-bottom",".88rem"))):"3"==t.payStatus?(e("#cancleOrder").hide(),console.log("receiptAmount 已取件"+parseFloat(t.receiptAmount).toFixed(2)),e(".order-notice").hide(),s+='<div class="am-list-content am-ft-black" style="font-size:.15rem;">已支付</div><div class="am-ft-black" style="font-size:.15rem;">'+(parseFloat(t.receiptAmount)/100).toFixed(2)+'元<span id="payResult"></span></div>',c='<p style="margin-top:.31rem;color:#566b96;font-size:13px;text-align:center"><span class="helpCenter" data-spmv="a106.b2115.c4640.d7191">帮助中心</span></p>'):"4"==t.payStatus?s+='<div class="am-list-content am-ft-gray" style="font-size:.15rem;">支付状态</div><div class="lastpayStatus am-ft-black" style="font-size:.15rem;">支付失败</div>':"5"==t.payStatus?(e("#cancleOrder").hide(),e(".order-notice").hide(),a='<div class="am-ft-gray" style="font-size:.15rem;">其它</div>',s+='<div class="am-list-content am-ft-gray" style="font-size:.15rem;">支付状态</div><div class="lastpayStatus am-ft-black" style="font-size:.15rem;">已支付</div>',c='<p style="margin-top:.31rem;color:#566b96;font-size:13px;text-align:center"><span class="helpCenter" data-spmv="a106.b2115.c4640.d7191">帮助中心</span></p>'):s+='<div class="am-list-content am-ft-gray" style="font-size:.15rem;">支付状态</div><div class="lastpayStatus am-ft-black" style="font-size:.15rem;">支付中</div>',null!=t.couponAmount&&""!=t.couponAmount&&"3"==t.payStatus&&0!=t.couponAmount&&(d+='<div class="am-list-item youhui-coupon"  style="padding-bottom:0.065rem"><div class="am-list-content am-ft-red" style="font-size:.15rem;">优惠劵</div><div class="am-ft-red" style="font-size:.15rem;">-'+(t.couponAmount/100).toFixed(2)+"</div></div>"),"1"==t.pricingMode&&"3"==t.payStatus&&t.orderAmount-t.payableAmount!=0&&(l+='<div class="am-list-item youhui-discount"  style="padding-bottom:0.065rem"><div class="am-list-content am-ft-red" style="font-size:.15rem;">优惠折扣</div><div class="am-ft-red" style="font-size:.15rem;">-'+((t.orderAmount-t.payableAmount)/100).toFixed(2)+"</div></div>"),i+='<div class="am-list-item"><div class="am-list-content am-ft-gray" style="font-size:.15rem;">支付方式</div>'+a+'</div><div class="am-list-item" style="padding-bottom:0.065rem"><div class="am-list-content am-ft-gray" style="font-size:.15rem;">物品重量</div><div class="am-ft-gray" style="font-size:.15rem;"><span class="data-weight">'+t.goodsWeight/1e3+'</span><span style="padding-left:.06rem">公斤</span></div><input type="hidden" class="data-presetWeight" value='+t.presetWeight+' /><input type="hidden" class="data-presetWeightPrice" value='+t.presetWeightPrice+' /><input type="hidden" class="data-extraWeightUnit" value='+t.extraWeightUnit+' /><input type="hidden" class="data-extraWeightPrice" value='+t.extraWeightPrice+' /></div><div class="am-list-item kuaidi-ok"  style="padding-bottom:0.065rem"><div class="am-list-content am-ft-gray" style="font-size:.15rem;">快递费</div><div class="am-ft-gray" style="font-size:.15rem;">'+r.toFixed(2)+"元</div></div>"+l+d+'<div class="am-list-item paid" style="padding-bottom:0.065rem">'+s+"</div>",e(".extra-list").html(i),e(".footer-des").html(c),e(".footer-des").css({"padding-top":"0.07rem;","padding-bottom":".115rem"});var p="",g="",h="",u="";if("1"==t.accepterType){var b=t.courierHeardUrl;void 0!==b&&""!=b||(b="https://expressprod.oss-cn-hangzhou.aliyuncs.com/mobile/img/courier_head_icon.png"),p='<div class="am-list-thumb" style="margin-right: .12rem;"><img src="'+b+'" style="width:.5rem;height:.5rem;" /></div>',g='<div class="am-list-title" style="font-size:.15rem;"><span  style="vertical-align:super;margin-bottom:2px;"  class="bizlogCourierName">'+t.courierName+'</span><span style="padding-left:.15rem;vertical-align:super;margin-bottom:2px;" class="bizlogCourierMobile">'+t.courierMobile+"</span></div>",h='<div data-spmv="a106.b2115.c4640.d7194" class="am-list-extra bizlogCourierPhone" style="overflow:visible;min-width: .36rem;width:.36rem;-webkit-box-flex: 0;-webkit-flex: 0;margin-top: .08rem;"style="min-width: .36rem;width:.36rem;-webkit-box-flex: 0;-webkit-flex: 0;margin-top: .07rem;"><a  href="tel:'+t.courierMobile+'"><img src="https://expressprod.oss-cn-hangzhou.aliyuncs.com/mobile/img/phone_icon.png" style="width:.36rem;height:.36rem;" /></a></div>'}else p='<div class="am-list-thumb" style="margin-right: .12rem;"><img src="https://expressprod.oss-cn-hangzhou.aliyuncs.com/mobile/station_head_icon.png" style="width:.5rem;height:.5rem;" /></div>',g='<div class="am-list-title" style="font-size:.15rem;"><span>'+t.siteName+'</span><span style="padding-left:.15rem;">'+t.managerMobile+"</span></div>",h='<div class="am-list-extra " style="overflow:visible;min-width: .36rem;width:.36rem;-webkit-box-flex: 0;-webkit-flex: 0;margin-top: .08rem;"><a  href="tel:'+t.managerMobile+'"><img src="https://expressprod.oss-cn-hangzhou.aliyuncs.com/mobile/img/phone_icon.png" style="width:.36rem;height:.36rem;" /></a></div>';u+='<div class="am-list-item" style="padding-top:.13rem;padding-bottom:.155rem;padding-right: .23rem;">'+p+'<div class="am-list-content address_listwhere">'+g+'<div class="am-list-brief" style="overflow:visible;height:.26rem;line-height:.26rem;"><span class="complaint_btn" data-spmv="a106.b2115.c4640.d7193">投诉</span></div></div>'+h+"</div>",e(".data-person").html(u),"1"==n&&(e(".complaint_btn").html("已投诉"),e(".complaint_btn").addClass("disabled_btn2")),e(".bizlogCourierPhone").click(function(){var t=e(".bizlogCourierName").html(),a=e(".bizlogCourierMobile").html();BizLog.call("info",{spmId:"a106.b2115.c4640.d7194",actionId:"clicked",params:{OrderNO:v,CourierName:t,CourierPhone:a}})})}function d(t,a,i){console.log("orderNo "+t),console.log("weight "+a),console.log("payAmount "+i);var s;s=null==a?null!=i&&i?{orderNo:t,payAmount:i}:{orderNo:t}:{orderNo:t,weight:a,payAmount:i};var o=jUrl+"/ep/order/pay";e.axs(o,s,function(a){if("0000"==a.meta.code){var s=a.result.orderStr.replace(/&amp;/g,"&");s=(s=(s=(s=(s=s.replace(/&lt;/g,"<")).replace(/&gt;/g,">")).replace(/&nbsp;/g," ")).replace(/&#39;/g,"'")).replace(/&quot;/g,'"'),console.log("orderStr04: "+s),AlipayJSBridge.call("tradePay",{orderStr:s},function(a){if(h=!1,"9000"==a.resultCode)f=null,e("body").off("touchmove"),refreshFlag=!0,e(".dialog_mask_pay").hide(),e(".dialog_mask_pay_sys").hide(),e(".dialog_mask").hide(),ant.pushWindow({url:"paySuccess.html?orderNo="+t});else{e(".payment_btn").removeClass("loading"),e(".payment_btn").removeClass("disabled");var s;s=null!=i&&i?i/100:e(".data-pay-show").text(),e(".payment_btn").html("支付<span style='width:2px;display: inline-block;margin-left:.05rem'></span>"+parseFloat(s).toFixed(2)+"元")}console.log(JSON.stringify(a))})}else toast({text:a.meta.code,type:"exception"})},function(t){"0513"==t.meta.code?toast({text:"订单已取消",type:"exception"}):"0515"==t.meta.code?alert("订单已支付过，无需重复支付"):toast({text:t.meta.msg,type:"exception"}),e("body").off("touchmove"),refreshFlag=!0,e(".dialog_mask_pay").hide(),e(".dialog_mask_pay_sys").hide(),e(".dialog_mask").hide(),window.location.reload()})}FastClick.attach(document.body);var l,r,n,c,m,p,g,h,u,v=getUrlParam("orderNo"),b="00",f=getUrlParam("payways3")||"",y=!1,x=!1;pushDownRefresh(function(t){console.log("dist "+(0-t)+"px"),e("#mesage1").show(),e("#message2").hide()},function(){e("#mesage1").hide(),e("#message2").show()},function(){e("#mesage1").hide(),e("#message2").hide(),e("body").hide()},"express_content",function(){t(v,0,function(){e("#mesage1").hide(),e("#message2").hide()})}),ant.on("resume",function(e){x=!0,refreshFlag=!0,e.data&&e.data.info&&showLoading(),t(v)}),t(v),ant.call("setTitle",{title:"订单详情"});var w=!1;e("#cancleOrder").click(function(){BizLog.call("info",{spmId:"a106.b2115.c4640.d7188",actionId:"clicked",params:{OrderNO:v}}),w||(w=!0,function(){var t=jUrl+"/ep/order/cancel_cause";e.axs(t,{},function(t){if(t.meta.success)if("0000"==t.meta.code){var a=t.result.cancelCause,i="",s="",o="",d=t.result.cancelCount,l=t.result.cancelCntLimit;if(""!=a||null!=a){for(var r=a.length,n=0;n<r;n++)n<2?i+='<div class="am-flexbox-item cancel_listorder">'+a[n]+"</div>":n<r-2?s+='<div class="am-flexbox-item cancel_listorder">'+a[n]+"</div>":o+='<div class="am-flexbox-item cancel_listorder">'+a[n]+"</div>";e(".cancelReason1").html(i),e(".cancelReason2").html(s),e(".cancelReason3").html(o)}isAndroid&&e(".cancel_listorder").css("border","1px solid #888"),e("#btn-ok").addClass("disabled"),e("#count-data").val(d),e("#count-cancelCntLimit").val(l),e("#dialog-show .am-flexbox-item").each(function(){var t="a106.b2115.c4643.";"不想寄了"==e(this).text()?t+="d7213":"信息填错了"==e(this).text()?t+="d7214":"上门速度慢"==e(this).text()?t+="d7215":"未上门取件"==e(this).text()?t+="d7216":"服务态度差"==e(this).text()?t+="d7217":"快递费用高"==e(this).text()&&(t+="d7218"),e(this).attr("data-spmv",t)}),e("#dialog-show .am-flexbox-item").on("click",function(){var t="a106.b2115.c4643.",a="";"不想寄了"==e(this).text()?(t+="d7213",a="不想寄了"):"信息填错了"==e(this).text()?(t+="d7214",a="信息填错了"):"上门速度慢"==e(this).text()?(t+="d7215",a="上门速度慢"):"未上门取件"==e(this).text()?(t+="d7216",a="未上门取件"):"服务态度差"==e(this).text()?(t+="d7217",a="服务态度差"):"快递费用高"==e(this).text()&&(t+="d7218",a="快递费用高"),BizLog.call("info",{spmId:t,actionId:"clicked",params:{OrderNO:v,title:a}}),e("#dialog-show .am-flexbox-item").removeClass("express_active"),isAndroid&&e("#dialog-show .am-flexbox-item").css("border-color","#888 !important;"),e(this).hasClass("express_active")?e(this).removeClass("express_active"):(isAndroid&&e(this).css("border","1px #108ee9 solid !important;"),e(this).addClass("express_active")),e("#btn-ok").hasClass("disabled")&&e("#btn-ok").removeClass("disabled")}),"3"==m?(e("#dialog-show").find(".msg").removeClass("alert_orerred"),e("#dialog-show").find(".msg").html("取消订单后<p>快递小哥将不会上门取件</p>")):d==l-1&&(e("#dialog-show").find(".msg").addClass("alert_orerred"),e("#dialog-show").find(".msg").html("您当日已取消"+d+"单，若再次取消，将被限制下单操作")),e(".dialog_cancel").show(),e("body").on("touchmove",function(e){e.preventDefault()},!1),refreshFlag=!1}else"0110"==t.meta.code&&toast({text:t.meata.msg,type:"exception"})})}())}),e("#btn-cancel").on("click",function(){BizLog.call("info",{spmId:"a106.b2115.c4643.d7211",actionId:"clicked",params:{OrderNO:v}}),w=!1,e(".dialog_cancel").hide(),e("body").off("touchmove"),refreshFlag=!0}),e(".dialog-close-num").unbind(),e(".dialog-close-num").click(function(){BizLog.call("info",{spmId:"a106.b2115.c4651.d7231",actionId:"clicked",params:{OrderNO:v}}),e(".dialog-num").hide(),window.location.reload()}),e("#btn-kefu").unbind(),e("#btn-kefu").on("click",function(){BizLog.call("info",{spmId:"a106.b2115.c4651.d7232",actionId:"clicked",params:{OrderNO:v}})}),e("#btn-sumbit").unbind(),e("#btn-sumbit").on("click",function(){BizLog.call("info",{spmId:"a106.b2115.c4651.d7233",actionId:"clicked",params:{OrderNO:v}}),e(".dialog-num").hide(),window.location.reload()}),e("#btn-warning-submit").unbind(),e("#btn-warning-submit").on("click",function(){BizLog.call("info",{spmId:"a106.b2115.c4650.d7230",actionId:"clicked",params:{OrderNO:v}}),e(".dialog-warning").hide(),ant.pushWindow({url:"cancellation-order.html?orderNo="+v})}),e(".dialog-close-kuaidi").on("touchstart",function(){BizLog.call("info",{spmId:"a106.b16.c01.d02",actionId:"clicked"})}),e(".num-add").on("click",function(){BizLog.call("info",{spmId:"a106.b2115.c4642.d7204",actionId:"clicked",params:{OrderNO:v}});var t=JSON.parse(e(".data-presetWeightPrice-number").val()),a=JSON.parse(e(".data-extraWeightUnit-number").val()),i=JSON.parse(e(".data-extraWeightPrice-number").val()),s=JSON.parse(e(".data-presetWeight").val()),o=parseFloat(e(".prise_val").val())+a/1e3;""==e(".prise_val").val()&&(o=a/1e3),e(".prise_val").val(o.toFixed(1));var d,l=JSON.parse(e(".prise_val").val());d=1e3*l>=s?t+Math.ceil((1e3*l-s)/a)*i:t,d/=100,e(".payment_btn").removeClass("disabled"),e(".pay-money").html(d.toFixed(2)),e(".payment_btn").text("支付 "+d.toFixed(2)+"元")}),e(".num-dec").on("click",function(){BizLog.call("info",{spmId:"a106.b2115.c4642.d7205",actionId:"clicked",params:{OrderNO:v}});var t=JSON.parse(e(".data-presetWeightPrice-number").val()),a=JSON.parse(e(".data-extraWeightUnit-number").val()),i=JSON.parse(e(".data-extraWeightPrice-number").val()),s=JSON.parse(e(".data-presetWeight").val()),o=parseFloat(e(".prise_val").val())-a/1e3;o<s/1e3&&(o=s/1e3,toast({text:"不能小于首重重量哦～"})),e(".prise_val").val(o.toFixed(1));var d,l=JSON.parse(e(".prise_val").val());d=1e3*l>=s?t+Math.ceil((1e3*l-s)/a)*i:t,d/=100,e(".payment_btn").removeClass("disabled"),e(".pay-money").html(d.toFixed(2)),e(".payment_btn").text("支付 "+d.toFixed(2)+"元")}),e(".payment_btn").click(function(){if(BizLog.call("info",{spmId:"a106.b2115.c4642.d7210",actionId:"clicked",params:{OrderNO:v}}),console.log("isManualPrice :"+c),!e(this).hasClass("disabled"))if("1"==c&&0==parseFloat(e("#pay-input-1").val())||"0"==c&&0==parseFloat(e(".pay-money").text()))toast({text:"请确认金额是否正确哦"});else{h=!0,e(this).addClass("disabled"),e(this).addClass("loading");var t=e(this).html();e(this).attr("tempHtml",t),e(this).html('<i class="icon" aria-hidden="true"></i>加载中...');var a=e("#pay-input-1").val(),i=a.indexOf(".");i==a.length-1&&e("#pay-input-1").val(a.substring(0,i)),i=-1==i?a.length:i;var s=100*parseFloat(a);if("1"==c)d(v,null,s);else if("0"==c){var o=100*parseFloat(e(".pay-money").text()),l=1e3*parseFloat(e(".prise_val").val());d(v,l,o)}else d(v,null,null)}}),e(".close_icon").click(function(){BizLog.call("info",{spmId:"a106.b2115.c4642.d7203",actionId:"clicked",params:{OrderNO:v}}),h||(e(".dialog_mask").hide(),e("body").off("touchmove"),refreshFlag=!0)}),e(".dialog-close-pay").click(function(){BizLog.call("info",{spmId:"a106.b2115.c4642.d7203",actionId:"clicked",params:{OrderNO:v}}),h||(e("#pay-input-1").val(""),e(".payment_btn").addClass("disabled"),e(".payment_btn").html("支付<span style='width:2px;display: inline-block;'></span>"),e(".dialog_mask_pay").hide(),e("body").off("touchmove"),refreshFlag=!0)}),e(".dialog-close-pay-sys").click(function(){BizLog.call("info",{spmId:"a106.b2115.c4642.d7203",actionId:"clicked",params:{OrderNO:v}}),h||(e(".dialog_mask_pay_sys").hide(),e("body").off("touchmove"),refreshFlag=!0)}),e(".dialog-close-complain").click(function(){BizLog.call("info",{spmId:"a106.b2115.c4641.d7196",actionId:"clicked",params:{OrderNO:v}}),e("body").off("touchmove"),refreshFlag=!0,e(".dialog-complain").find("input").prop("checked",!1),e("#btn-complain-sumbit").addClass("disabled"),e(".dialog-complain").hide()}),e("#btn-complain-cancel").on("click",function(){BizLog.call("info",{spmId:"a106.b2115.c4641.d7195",actionId:"clicked",params:{OrderNO:v}}),e("body").off("touchmove"),refreshFlag=!0,e(".dialog-complain").find("input").prop("checked",!1),e("#btn-complain-sumbit").addClass("disabled"),e(".dialog-complain").hide()}),e("#btn-complain-sumbit").unbind(),e("#btn-complain-sumbit").on("click",function(){if(BizLog.call("info",{spmId:"a106.b2115.c4641.d7197",actionId:"clicked",params:{OrderNO:v}}),!e("#btn-complain-sumbit").hasClass("disabled")){var t=e(".dialog-complain").find("span[data-desc='1']").find(".am-list-content").html();e(".dialog-complain").find("input").prop("checked",!1),function(t,a){var i={orderId:JSON.parse(t),content:a},s=jUrl+"/ep/order/complain";e.axs(s,i,function(t){"0000"==t.meta.code&&(e("body").off("touchmove"),refreshFlag=!0,toast({text:"投诉成功",type:"success"}),e("#btn-complain-sumbit").addClass("disabled"),e(".dialog-complain").hide(),e(".complaint_btn").html("已投诉"),e(".complaint_btn").addClass("disabled_btn2"))})}(l,t)}}),e("#btn-saosao-submit").unbind(),e("#btn-saosao-submit").click(function(){BizLog.call("info",{spmId:"a106.b2115.c4694.d7336",actionId:"clicked",params:{OrderNO:v}}),e(".dialog-saosao").hide();var t=e(".saosao-desc").html();!function(t,a){var i={orderNo:v,orderId:JSON.parse(t),waybillNo:a},s=jUrl+"/ep/order/save_way_bill";e.axs(s,i,function(t){t.meta.success&&(e(".waybillNo-type").show(),e(".wuliu").show(),e(".waybillNo-type .am-list-extra").html(a),e(".sao-number").hide(),u=a)},function(e){"0611"==e.meta.code?toast({text:"与已有单号重复，请扫描对应的真实运单~"}):toast({text:"加载出错，请重试",type:"exception"})})}(e(".data-orderId").val(),t=t.replace(/[^0-9\.]/g,""))}),e("#btn-saosao-cancel").on("click",function(){BizLog.call("info",{spmId:"a106.b2115.c4694.d7335",actionId:"clicked",params:{OrderNO:v}}),e(".dialog-saosao").hide()}),e(".prise_val").on("input",function(){e(this).val(e(this).val().replace(/[^0-9\.]/g,""));var t=e(this).val(),a=t.indexOf(".");4==(a=-1==a?t.length:a)&&(t=t.substring(0,3),e(this).val(t),toast({text:"请确认重量是否正确哦"})),a=-1==(a=t.indexOf("."))?t.length:a,t.length-a==3&&(t=t.substring(0,t.length-1),e(this).val(t),toast({text:"请确认重量是否正确哦"}));var i,s=parseFloat(e(".prise_val").val()),o=JSON.parse(e(".data-presetWeightPrice-number").val()),d=JSON.parse(e(".data-extraWeightUnit-number").val()),l=JSON.parse(e(".data-extraWeightPrice-number").val()),r=JSON.parse(e(".data-presetWeight").val());i=1e3*s>=r?o+Math.ceil((1e3*s-r)/d)*l:o,(i/=100)&&(e(".payment_btn").removeClass("disabled"),e(".pay-money").html(i.toFixed(2)),e(".payment_btn").text("支付 "+i.toFixed(2)+"元")),""==e(".prise_val").val()?(e(".payment_btn").addClass("disabled"),e(".payment_btn").text("支付 ")):e(".payment_btn").removeClass("disabled")}),e(".prise_val").focus(function(){BizLog.call("info",{spmId:"a106.b2115.c4642.d7206",actionId:"clicked",params:{OrderNO:v}})}),e("#pay-input-1").focus(function(){BizLog.call("info",{spmId:"a106.b2115.c4642.d7209",actionId:"clicked",params:{OrderNO:v}}),e(this).attr("placeholder",""),e(this).css("font-size",".3rem")}),e("#pay-input-1").blur(function(){e(this).attr("placeholder","请输入金额"),""==e(this).val()&&e(this).css("font-size",".17rem")}),e("#pay-input-1").on("input propertychange",function(){e(this).val(e(this).val().replace(/[^0-9\.]/g,""));var t=e(this).val(),a=t.indexOf(".");if(6==(a=-1==a?t.length:a)&&(t=t.substring(0,5),e(this).val(t),toast({text:"请确认金额是否正确哦"})),a=t.indexOf("."),a=-1==a?t.length:a,t.length-a==4&&(t=t.substring(0,t.length-1),e(this).val(t),toast({text:"请确认金额是否正确哦"})),""==e("#pay-input-1").val())e(".payment_btn").addClass("disabled"),e(".payment_btn").html("支付<span style='width:2px;display: inline-block;'></span>");else{e(".payment_btn").removeClass("disabled");var i=parseFloat(e("#pay-input-1").val()).toFixed(2);e(".payment_btn").html("支付<span style='width:2px;display: inline-block;'></span>"+i+"元")}}),e(".dialog_mask_pay").find(".am-list-clear").click(function(){e("#pay-input-1").blur(),e(".payment_btn").addClass("disabled"),e(".payment_btn").html("支付<span style='width:2px;display: inline-block;'></span>")}),e(".mycomplain").unbind(),e(".mycomplain").on("click",function(t){var a="a106.b2115.c4641.",i="";"上门速度慢"==e(this).find(".am-list-content").text()?(a+="d7198",i="上门速度慢"):"未上门取件"==e(this).find(".am-list-content").text()?(a+="d7199",i="未上门取件"):"服务态度差"==e(this).find(".am-list-content").text()?(a+="d7200",i="服务态度差"):"快递员报价过高"==e(this).find(".am-list-content").text()?(a+="d7201",i="快递员报价过高"):"快递员称重过高"==e(this).find(".am-list-content").text()&&(a+="d7202",i="快递员称重过高"),BizLog.call("info",{spmId:a,actionId:"clicked",params:{OrderNO:v,title:i}}),e(".dialog-complain .am-list-item").attr("data-desc","0"),e(".dialog-complain .am-list-item").find("input").prop("checked",!1),e(this).find("input").prop("checked",!0),e(this).attr("data-desc","1"),e("#btn-complain-sumbit").removeClass("disabled")})});