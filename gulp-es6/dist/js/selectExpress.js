"use strict";function showList(e,t,a,s){var i="";0!=e.serviceMap.length&&(i+='<div class="hairline-bottom" style="font-size: .13rem;background:#f5f5f9;padding:0.075rem 0.145rem 0.07rem 0.14rem;"><span class="am-ft-gray">'+s+a+'点左右可服务</span><span class="am-ft-orange" style="display:inline-block;float:right;">价格均为预估值</span></div>'),$.each(e.serviceMap,function(a){for(var s=!1,o=0;o<t.length;o++)this.code==t[o].replace(/\"/g,"").replace(/\\/g,"")&&(s=!0);if(!s){var n="",r="",l=this.tag.substring(0,this.tag.length-1);tagval=l.split(","),$.each(tagval,function(e){n+='<span style="height:.11rem;line-height: .11rem;">'+tagval[e]+"</span>"}),""!=this.price&&null!=this.price&&(r='<div class="am-ft-orange" style="display:block;;font-size: .15rem;">'+this.price+"元</div>");var d=a+1;a==e.serviceMap.length-1?xHtml='<div epCompanyId="'+this.id+'" epCompanyNo="'+this.code+'" epCompanyName="'+this.name+'" acceptOrderFrom="'+this.acceptOrderFrom+'" acceptOrderTo="'+this.acceptOrderTo+'" imgsrc="'+this.logo+'" slogan="'+this.slogan+'" tag="'+this.tag+'" class="am-list-item typelink " style="height:0.885rem;margin-left:-0.01rem;background-size: 0 0,0 0,0 0,0 0;" data-spmv="a106.b2108.c4626.'+d+'">':xHtml='<div epCompanyId="'+this.id+'" epCompanyNo="'+this.code+'" epCompanyName="'+this.name+'" acceptOrderFrom="'+this.acceptOrderFrom+'" acceptOrderTo="'+this.acceptOrderTo+'" imgsrc="'+this.logo+'" slogan="'+this.slogan+'" tag="'+this.tag+'" class="am-list-item typelink" style="height:.885rem;margin-left:-0.01rem;" data-spmv="a106.b2108.c4626.'+d+'">',i+=xHtml+'<div class="am-list-thumb choice_leftlogo"><img src="'+this.logo+'" alt=""></div><div class="am-list-content" style="padding-top:.04rem;"><div class="list_lineheight"><span class="compName" style="font-size:.16rem">'+this.name+'</span><span class="hot_icon hoticon'+this.hotStatus+'">热</span><span class="hot_icon newicon'+this.newStatus+'">新</span></div><span class="am-ft-gray advertisementvals" style="font-size:.14rem;padding-top: 0.04rem;padding-bottom: .01rem;">'+this.slogan+'</span><div class="am-ft-orange bubble_font" style="height:.135rem;line-height:.135rem;margin-top:0.005rem;margin-bottom:0.01rem;padding-top:0.01rem;">'+n+"</div></div>"+r+'<div class="am-list-arrow"><span class="am-icon horizontal" style="vertical-align:middle"><img src="https://expressprod.oss-cn-hangzhou.aliyuncs.com/mobile/img/indicator_icon.png"/></span></div></div>',BizLog.call("info",{spmId:"a106.b2108.c4626",actionId:"exposure",params:{CompName:this.name}})}}),0!=e.nonServiceMap.length&&0!=e.serviceMap.length?i+='<div class="hairline-bottom hairline-top" style="font-size: .13rem;background:#f5f5f9;padding:0.075rem 0.145rem 0.07rem 0.14rem;"><span class="am-ft-gray">'+s+a+"点左右不可服务，选择后将匹配最早服务时间</span></div>":0!=e.nonServiceMap.length&&0==e.serviceMap.length?(i+='<div style="background:#fff;height:2.065rem;text-align: center;"><img src="https://expressprod.oss-cn-hangzhou.aliyuncs.com/mobile/img/sorry_pic.png" style="width:0.88rem;height:0.88rem;margin:0.455rem auto 0.085rem;"/><br/><span style="font-size: .15rem;color:#888;">暂无公司'+s+a+"点左右可服务</span></div>",i+='<div class="hairline-bottom hairline-top" style="font-size: .13rem;background:#f5f5f9;padding:0.075rem 0.145rem 0.07rem 0.14rem;"><span class="am-ft-gray">建议从如下公司选择</span><span class="am-ft-orange" style="display:inline-block;float:right;">价格均为预估值</span></div>'):i+='<div class="hairline-top"></div>',$.each(e.nonServiceMap,function(e){for(var a=!1,s=0;s<t.length;s++)this.code==t[s].replace(/\"/g,"").replace(/\\/g,"")&&(a=!0);if(!a){var o="",n="",r=this.tag.substring(0,this.tag.length-1);tagval=r.split(","),$.each(tagval,function(e){o+='<span style="height:.11rem;line-height: .11rem;">'+tagval[e]+"</span>"}),""!=this.price&&null!=this.price&&(n='<div class="am-ft-orange" style="display:block;;font-size: .15rem;">'+this.price+"元</div>");var l=e+1;xHtml='<div epCompanyId="'+this.id+'" epCompanyNo="'+this.code+'" epCompanyName="'+this.name+'" acceptOrderFrom="'+this.acceptOrderFrom+'" acceptOrderTo="'+this.acceptOrderTo+'" imgsrc="'+this.logo+'" slogan="'+this.slogan+'" tag="'+this.tag+'" class="am-list-item typelink" style="height:.885rem" data-spmv="a106.b2108.c4626.'+l+'">',i+=xHtml+'<div class="am-list-thumb choice_leftlogo"><img src="'+this.logo+'" alt=""></div><div class="am-list-content" style="padding-top:.02rem;"><div class="list_lineheight"><span class="compName" style="font-size:.16rem">'+this.name+'</span><span class="hot_icon hoticon'+this.hotStatus+'">热</span><span class="hot_icon newicon'+this.newStatus+'">新</span>',this.name.length>6&&("1"==this.hotStatus||"1"==this.newStatus)?i+='<span class="serverTime" style="font-size:0.12rem;margin-left:-0.02rem;margin-top:0.04rem;color:#a5a5a5;position:absolute;width:1.2rem;overflow:hidden;text-overflow: ellipsis;display: inline-block;">（'+this.serviceTimeDesc+"）</span>":i+='<span class="serverTime" style="font-size:0.12rem;margin-left:-0.02rem;margin-top:0.04rem;color:#a5a5a5;position:absolute;">（'+this.serviceTimeDesc+"）</span>",i+='</div><span class="am-ft-gray advertisementvals" style="font-size:.14rem;padding-top: 0.04rem;padding-bottom: .01rem;">'+this.slogan+'</span><div class="am-ft-orange bubble_font" style="height:.135rem;line-height:.135rem;margin-bottom:0.01rem;padding-top:0.0001rem;">'+o+"</div></div>"+n+'<div class="am-list-arrow"><span class="am-icon horizontal" style="vertical-align:middle"><img src="https://expressprod.oss-cn-hangzhou.aliyuncs.com/mobile/img/indicator_icon.png"/></span></div></div>',BizLog.call("info",{spmId:"a106.b2108.c4626",actionId:"exposure",params:{CompName:this.name}})}}),$(".management_list").html(i)}Zepto(function(e){ant.call("setTitle",{title:"选择快递"}),window.isNotResume=!0,window.isServicing=getUrlParam("isServicing")||"2",ant.on("resume",function(e){window.isNotResume=!1,ant.setSessionData({data:{epCompanyNo:"",epCompanyName:"",acceptOrderFrom:"",acceptOrderTo:"",productTypeId:"",productTypeName:"",presetWeight:"",presetWeightPrice:"",extraWeightUnit:"",extraWeightPrice:"",goodsOneValue:"",goodsOneIndex:"",goodstypeValue:"",dayValue:"",timeValue:"",timeDate:"",remarkContent:""}}),window.swiperflag,Express.init()}),window.pageNo=1,window.nextPagination=!1;window.prePagination=!1,Express.init()});var Express=new Object({init:function(){showLoading(),ant.getSessionData({keys:["filterCompanyId","cityCode","sendAreaCode","recAreaCode","epCompanyId","epCompanyName","addressDayValue","addressTimeValue","addressGoodsOneValue","sendAddress"]},function(e){filterCompanyId=e.data.filterCompanyId,window.cityCode=e.data.cityCode;var t=e.data.sendAreaCode,a=e.data.sendAddress,s=e.data.recAreaCode,i=(1e3*parseFloat(e.data.addressGoodsOneValue)).toString(),o=e.data.addressDayValue,n="今天"==o?"TDY":"明天"==o?"TOM":"AFT",r=parseFloat(e.data.addressTimeValue).toString();window.swiperflag=!0,console.log("是否从选快递下单页面转来"+e.data.epCompanyId),e.data.epCompanyId&&""!=e.data.epCompanyId&&"1"!=window.isServicing&&("information-fill-placeorder.html",$(".sorrynotic").show(),$("#oldExpressName").html(e.data.epCompanyName),window.swiperflag=!1,$(".express_content").css("padding-bottom","0"));var l={cityCode:window.cityCode,snderDstrCode:t,senderAddress:a,rcvrDstrCode:s,weight:i,bookedDay:n,bookedHour:r};console.log("cityCode "+window.cityCode),console.log("snderDstrCode "+t),console.log("sendAddress "+a),console.log("rcvrDstrCode "+s),console.log("weight "+i),console.log("bookedDay "+n),console.log("bookedHour "+r);var d=jUrl+"/ep/express_com/list/v2";$.axs(d,l,function(e){if(console.log(e),hideLoading(),e.meta.success){if(0==e.result.serviceMap.length&&0==e.result.nonServiceMap.length)$(".sorrynotic").hide(),$(".select_expresscontent_empty").show(),window.swiperflag=!1;else{$(".select_expresscontent_empty").hide();var t=e.result,a=filterCompanyId;"[object Array]"===Object.prototype.toString.call(a)||(a=2==a.length?[]:filterCompanyId.slice(1,filterCompanyId.length-1).split(",")),showList(t,a,r,o)}window.swiperflag&&window.isNotResume&&(promotion(window.cityCode,"BM1010","a106.b2108.c4627"),getNotice(window.cityCode,"BM1010","a106.b2108.c4625")),$(".express_content").show(),isAndroid&&($(".borderTop").css("border-top","1px solid #ddd"),$(".bubble_font span").css({border:"1px solid #ff8200","padding-top":"0.02rem","padding-bottom":"0.015rem",height:"auto","line-height":"1","font-size":".1rem"})),$(".management_list").unbind().on("click",".typelink",function(){var e=$(".typelink").index(this)+1;BizLog.call("info",{spmId:"a106.b2108.c4626."+e,actionId:"clicked",params:{CompName:$(this).find(".am-list-title .compName").text()}});var t=$(this).attr("epCompanyId"),a=$(this).attr("epCompanyNo"),s=$(this).attr("epCompanyName"),i=$(this).attr("acceptOrderFrom"),o=$(this).attr("acceptOrderTo"),n=$(this).attr("slogan"),r=$(this).attr("imgsrc"),l=$(this).attr("tag");ant.setSessionData({data:{epCompanyId:t,epCompanyNo:a,epCompanyName:s,acceptOrderFrom:i,acceptOrderTo:o,slogan:n,imgsrc:r,tag:l}}),$(document.body).hide(),console.log("跳转页面之前"),$(this).find(".serverTime").length&&$(this).find(".serverTime").length>0?ant.pushWindow({url:"information-fill.html?isCompanyService=0"}):ant.pushWindow({url:"information-fill.html?isCompanyService=1"})})}else alert(e.meta.msg)})})}});