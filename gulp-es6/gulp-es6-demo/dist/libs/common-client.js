"use strict";function getUrlParam(name){var reg=new RegExp("(^|&)"+name+"=([^&]*)(&|$)"),r=window.location.search.substr(1).match(reg);return null!=r?decodeURI(r[2]):null}function toast(config,callback){ant.toast(config,callback)}function showLoading(){$(document.body).hide(),document.addEventListener("AlipayJSBridgeReady",function(){AlipayJSBridge.call("showLoading",{text:"加载中"})},!1)}function format(){if(0==arguments.length)return"";for(var str=arguments[0],i=1,len=arguments.length;i<len;i++){var re=new RegExp("\\{"+(i-1)+"\\}","gm");str=str.replace(re,arguments[i])}return str}function hideLoading(){document.addEventListener("AlipayJSBridgeReady",function(){AlipayJSBridge.call("hideLoading")},!1),$(document.body).show()}function clickStatus(e){this.on("touchstart",function(){$(this).css("opacity","0.3")}),this.on("touchend",function(){$(this).css("opacity","1")})}function checkBlur(e){this.blur()}function pushWindow(url,hideBody){hideBody&&$(document.body).hide(),ant.pushWindow({url:url})}function pushDownRefresh(ListentEvent1,ListentEvent2,ListentEvent3,content1,callback){var content=document.getElementsByClassName("express_content")[0],_start=0,_end=0,timeOut=-50,endLose=!0;isAndroid&&(timeOut=-5),content.addEventListener("touchstart",function(event){if(refreshFlag){var touchTarget=event.targetTouches[0];_start=touchTarget.pageY}},!1),content.addEventListener("touchmove",function(e){if(refreshFlag){var touchTarget=e.targetTouches[0];_end=_start-touchTarget.pageY,_end<=timeOut&&$(window).scrollTop()<=0&&(ListentEvent1(_end),setTimeout(function(){endLose&&callback()},2e3))}}),content.addEventListener("touchend",function(){endLose=!1,refreshFlag&&_end<timeOut&&$(window).scrollTop()<=0&&callback()},!1)}function getNotice(cityCode,pageId,spmId,cacheName){var info={pageId:pageId,cityCode:cityCode},xhrurl=jUrl+"/ep/notice";$.axs(xhrurl,info,function(data){if(data.meta.success){var noticeContent=data.result;if(noticeContent){if($(".express-content-notice").css("margin-top","0"),$(".header_notification").show(),window.cancelAnimationFrame(window.stop),$(".marquee3k").empty(),$(".am-notice-content").empty(),$(".am-notice-content").html('<div class="marquee3k" data-speed="0.4" data-pausable="bool">                                 <h1 style="font-size:.14rem;font-weight:normal">                                  <span class="noticeval" >'+noticeContent+"</span>                                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                                 </h1>                                 </div>"),Marquee3k.init(),Marquee3k.refreshAll(),spmId&&BizLog.call("info",{spmId:spmId,actionId:"exposure",params:{title:noticeContent}}),cacheName){var sessionObj={};sessionObj[cacheName+cityCode]=noticeContent,ant.setSessionData({data:sessionObj})}}else $(".header_notification").hide()}},function(d){$(".header_notification").hide(),console.log(d)})}function promotion(cityCode,pageId,spmId,cacheName){$(".promotion-txt").hide();var info={pageId:pageId,cityCode:cityCode},xhrurl=jUrl+"/ep/promotion";$.axs(xhrurl,info,function(data){if(data.meta.success){var operaPosition=data.result.promos;if(cacheName){var sessionObj={};sessionObj[cacheName+cityCode]=operaPosition,ant.setSessionData({data:sessionObj})}setPromotionImg(operaPosition,spmId)}},function(){})}function setPromotionImg(operaPosition,spmId){var oHtml="";if(operaPosition&&""!=operaPosition){$(".promotion-txt").show();$(".promotion-txt").html('<div class="swiper-container" style="bottom:-1px;"><div class="swiper-wrapper swiper_list index_list"></div><div class="swiper-pagination" style="display:none"></div></div>');for(var k=0;k<operaPosition.length;k++){if(null!=operaPosition[k].linkUrl)var adUrl=operaPosition[k].linkUrl,adPromotionId=operaPosition[k].promotionId,adName=operaPosition[k].name;else var adUrl="javascript:void(0)";oHtml+='<a class="swiper-slide" _href="'+adUrl+'" _promotionId="'+adPromotionId+'" _name="'+adName+'" data-spmv="'+spmId+"."+(k+1)+'"><div style="max-height:1rem;" ><img src="'+operaPosition[k].imageUrl+'" style="width:100%;display:block;max-height:1rem;border:0"></div></a>',BizLog.call("info",{spmId:spmId,actionId:"exposure",params:{CampID:adPromotionId,CampName:adName}})}for(var count=0,images=[],m=0;m<operaPosition.length;m++)images[m]=new Image,images[m].src=operaPosition[m].imageUrl,images[m].onload=function(){if(++count>=operaPosition.length){if($(".index_list").html(oHtml),$(".index_list a").on("click",function(){var tempUrl=$(this).attr("_href"),tmmpPromotionId=$(this).attr("_promotionId"),tmmpName=$(this).attr("_name"),spmIdNmuber=$(this).attr("data-spmv");BizLog.call("info",{spmId:spmIdNmuber,actionId:"clicked",params:{CampID:tmmpPromotionId,CampName:tmmpName,ToURL:tempUrl}}),pushWindow($(this).attr("_href"),!0)}),operaPosition.length>1){$(".swiper-pagination").show();var mySwiper=new Swiper(".swiper-container",{pagination:".swiper-pagination",paginationClickable:!0,speed:300,autoplay:5e3,autoplayDisableOnInteraction:!1});$(".promotion-txt").show()}else{$(".swiper-pagination").hide();var mySwiper=new Swiper(".swiper-container",{pagination:"",autoplayDisableOnInteraction:!0})}mySwiper.updatePagination(),mySwiper.update(!0)}},images[m].onerror=function(){}}else $(".promotion-txt").hide()}function getQuery(){for(var match,urlParams={},pl=/\+/g,search=/([^&=]+)=?([^&]*)/g,decode=function(s){return decodeURIComponent(s.replace(pl," "))},query=decodeURI(window.location.search.substring(1));match=search.exec(query);)urlParams[decode(match[1])]=decode(match[2]);return urlParams}function notPaidOrder(notPaidOrderNo,notPaidRemindCnt){if(0!=notPaidRemindCnt&&""!=notPaidRemindCnt&&notPaidRemindCnt){var letters="您有一个订单未完成支付，请前去支付以免影响派送~";return notPaidRemindCnt>=1&&(letters="您有一个订单未完成支付，请前去支付以免影响您的信用~"),window.confirm(letters)&&ant.pushWindow({url:"order-details.html?orderNo="+notPaidOrderNo+"&orderUid="+orderUid+"&payways3=true",param:{showLoading:!0}}),!0}return!1}function processPhoneNum(phoneNum){return phoneNum=phoneNum.replace(/[^0-9]+/g,""),0==phoneNum.indexOf("86")&&(phoneNum=phoneNum.slice(2,phoneNum.length)),phoneNum}function isCorrectPhoneNum(phoneNum){return!(!/^\d{7,15}$/.test(phoneNum)&&""!=phoneNum&&" "!=phoneNum)}function cellPhoneHide(cellphone){var sensitiveData,frontCharNum,tailCharNum,hiddenCharNum,temp=cellphone.trim();if(11===cellphone.length)sensitiveData=temp,frontCharNum=3,tailCharNum=2,hiddenCharNum=6;else{var noHideNum=temp.length-4;sensitiveData=temp,frontCharNum=noHideNum/2,tailCharNum=noHideNum-noHideNum/2,hiddenCharNum=4}var tmp=sensitiveData.trim(),length=tmp.length;if(frontCharNum<0||tailCharNum<0||hiddenCharNum<0||frontCharNum+tailCharNum>length)return tmp;var beginIndex=frontCharNum-1,endIndex=length-tailCharNum,result=[];beginIndex>=0&&beginIndex<length&&result.push(tmp.substring(0,frontCharNum));for(var q=0;q<hiddenCharNum;q++)result.push("*");return endIndex>=0&&endIndex<length&&result.push(tmp.substring(endIndex)),result.join("")}function getAreaNameByCode(code){var code=code.toString(),result="";if([{id:"410881",value:"河南省 济源市"},{id:"429004",value:"湖北省 仙桃市"},{id:"429005",value:"湖北省 潜江市"},{id:"429006",value:"湖北省 天门市"},{id:"429021",value:"湖北省 神农架林区"},{id:"441900",value:"广东省 东莞市"},{id:"442000",value:"广东省 中山市"},{id:"442101",value:"广东省 东沙群岛"},{id:"460200",value:"海南省 三亚市"},{id:"469001",value:"海南省 五指山市"},{id:"469002",value:"海南省 琼海市"},{id:"469003",value:"海南省 儋州市"},{id:"469005",value:"海南省 文昌市"},{id:"469006",value:"海南省 万宁市"},{id:"469007",value:"海南省 东方市"},{id:"469025",value:"海南省 定安县"},{id:"469026",value:"海南省 屯昌县"},{id:"469027",value:"海南省 澄迈县"},{id:"469028",value:"海南省 临高县"},{id:"469030",value:"海南省 白沙黎族自治县"},{id:"469031",value:"海南省 昌江黎族自治县"},{id:"469033",value:"海南省 乐东黎族自治县"},{id:"469034",value:"海南省 陵水黎族自治县"},{id:"469035",value:"海南省 保亭黎族苗族自治县"},{id:"469036",value:"海南省 琼中黎族苗族自治县"},{id:"469037",value:"海南省 西沙群岛"},{id:"469038",value:"海南省 南沙群岛"},{id:"469039",value:"海南省 中沙群岛的岛礁及其海域"},{id:"620200",value:"甘肃省 嘉峪关市"},{id:"659001",value:"新疆维吾尔自治区 石河子市"},{id:"659002",value:"新疆维吾尔自治区 石河子市"},{id:"659003",value:"新疆维吾尔自治区 石河子市"},{id:"659004",value:"新疆维吾尔自治区 石河子市"},{id:"110228",value:"北京市 密云县"},{id:"110229",value:"北京市 延庆县"},{id:"110230",value:"北京市 其它区"},{id:"500222",value:"重庆市 綦江区"},{id:"500223",value:"重庆市 潼南县"},{id:"500224",value:"重庆市 铜梁县"},{id:"500225",value:"重庆市 大足区"},{id:"500226",value:"重庆市 荣昌县"},{id:"500227",value:"重庆市 璧山县"},{id:"500228",value:"重庆市 梁平县"},{id:"500229",value:"重庆市 城口县"},{id:"500230",value:"重庆市 丰都县"},{id:"500231",value:"重庆市 垫江县"},{id:"500232",value:"重庆市 武隆县"},{id:"500233",value:"重庆市 忠县"},{id:"500234",value:"重庆市 开县"},{id:"500235",value:"重庆市 云阳县"},{id:"500236",value:"重庆市 奉节县"},{id:"500237",value:"重庆市 巫山县"},{id:"500238",value:"重庆市 巫溪县"},{id:"500240",value:"重庆市 石柱土家族自治县"},{id:"500241",value:"重庆市 秀山土家族苗族自治县"},{id:"500242",value:"重庆市 酉阳土家族苗族自治县"},{id:"500243",value:"重庆市 彭水苗族土家族自治县"}].map(function(item,index,array){item.id==code&&(result=item.value)}),""!=result)return result;if(iosProvinces.map(function(item,index,array){if(item.id.substring(0,2)==code.substring(0,2)){if(result+=item.value,"00"==code.substring(2,4))return;var cityArr=iosCitys.filter(function(item){return item.id.substring(0,2)==code.substring(0,2)});cityArr.length>0?cityArr.map(function(item){if(code.substring(2,4)==item.id.substring(2,4))if(result+=" ",result+=item.value,"00"==code.substring(4,6));else{var countyArr=iosCountys.filter(function(item){return item.id.substring(0,4)==code.substring(0,4)});countyArr.length>0?countyArr.map(function(item,index,array){code.substring(4,6)==item.id.substring(4,6)&&(result+=" ",result+=item.value)}):console.log("can't find countys!")}}):console.log("can't find city")}}),!arguments[1]){var lastArr=result.split(" ");if(lastArr[1]){var indexofArr=lastArr[1].indexOf("市");indexofArr>=0&&lastArr[0]==lastArr[1].substring(0,indexofArr)&&(lastArr=lastArr.slice(1))}result=lastArr.join(" ")}return result}function getcityCodeBycountyCode(code){var code=code.toString(),result="",specialCountyCode=["429004","429005","429006","429021","441900","442000","442101","469001","469002","469003","469005","469006","469007","469025","469026","469027","469028","469030","469031","469033","469034","469035","469036","469037","469038","469039","620200","659001","659002","659003","659004"];return"00"==code.substring(4,6)?code:(specialCountyCode.map(function(item,index,array){code==item&&(console.log(code),result=code)}),""==result&&(result=code.substring(0,4)+"00"),result)}function subAreaString(provinceName,cityName,districtName,sendFlag){provinceName="黑龙江省"==provinceName?"黑龙江":"内蒙古自治区"==provinceName?"内蒙古":provinceName.substr(0,2);var cityAreaName=cityName+districtName,digit=4;if("true"==sendFlag&&(digit=5),cityAreaName.length>10){cityAreaName=cityAreaName.substring(0,digit)+"..."+cityAreaName.substring(cityAreaName.length-digit,cityAreaName.length)}return provinceName+cityAreaName}function clearSeesion(){ant.setSessionData({data:{filterCompanyId:"",senderAddrID:"",sendName:"",sendNumber:"",sendProvinceCode:"",sendCityCode:"",sendAreaCode:"",sendStreet:"",sendAddress:"",reciptiensAddrID:"",recName:"",recNumber:"",recProvinceCode:"",recCityCode:"",recAreaCode:"",recStreet:"",recAddress:"",serviceAuthStatus:"",epCompanyId:"",epCompanyNo:"",epCompanyName:"",acceptOrderFrom:"",acceptOrderTo:"",receiverCount:"",sendercount:""}})}var jUrl="https://sendex.alipay-eco.com/api",indexUid="SD1010",addInfoUid="AR1010",addInfosUid="AR1020",addInforUid="AR1030",rRid="AR1070",sRid="AR1060",sflag=!1,rflag=!1,selectSUid="AR1040",selectRUid="AR1050",yUid="BM2010",xUid="BM1010",orderUid="BM4010",isNetworkAvailable=!0,refreshFlag=!0,u=navigator.userAgent,isAndroid=u.indexOf("Android")>-1||u.indexOf("Adr")>-1,isIOS=!!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),cityUrl="city-direct.html",nearUrl="near-list.html",query=getQuery(),depth=+query.depth||0;document.addEventListener("h5NetworkChange",function(e){ant.network.getType(function(result){0==result.networkAvailable?(isNetworkAvailable=!1,toast({text:"网络不给力",type:"exception"})):isNetworkAvailable=!0})},!1),Zepto(function($){function baseAuth(doNext){var authData={scopeNicks:["auth_base"]};console.log("env is "+env),"sit"==env&&(authData={scopeNicks:["auth_base"],appId:"2017010904949252"}),AlipayJSBridge.call("getAuthCode",authData,function(result){auth_code=result.authcode;var info={authCode:auth_code},xhrurl=jUrl+"/ep/user/base_auth";$.axs_base(xhrurl,info,!1,function(d){d.meta.success&&doNext()},function(d){toast({text:"获取用户信息失败",type:"exception"})})})}function Message(mescode){switch(mescode){case"0912":return"已经成功转为EMS为您服务啦～";case"0512":return"订单已取消";case"9999":return"系统异常";default:return"加载出错，请重试"}}function ajaxErr(jqXHR,statusTxt,errorThrown){var text="";switch(jqXHR.status){case 500:text="加载出错，请重试";break;case 404:case 408:case 0:text="网络不给力";break;default:text="加载出错，请重试"}toast({text:text,type:"exception"})}alert(isNetworkAvailable),$.CurTime=function(){return Date.parse(new Date)/1e3},$.DateToUnix=function(string){var f=string.split(" ",2),d=(f[0]?f[0]:"").split("-",3),t=(f[1]?f[1]:"").split(":",3);return new Date(parseInt(d[0],10)||null,(parseInt(d[1],10)||1)-1,parseInt(d[2],10)||null,parseInt(t[0],10)||null,parseInt(t[1],10)||null,parseInt(t[2],10)||null).getTime()/1e3},$.UnixToDate=function(unixTime,isFull,timeZone){"number"==typeof timeZone&&(unixTime=parseInt(unixTime)+60*parseInt(timeZone)*60);var time=new Date(1e3*unixTime),ymdhis="";return ymdhis+=time.getUTCFullYear()+"-",ymdhis+=time.getUTCMonth()+1+"-",ymdhis+=time.getUTCDate(),!0===isFull&&(ymdhis+=" "+time.getUTCHours()+":",ymdhis+=time.getUTCMinutes()+":",ymdhis+=time.getUTCSeconds()),ymdhis},$.axs=function(url,data,successfn,errorfn){$.axs_base(url,data,!0,successfn,function(d){"0013"==d.meta.code||"0014"==d.meta.code?baseAuth(function(){$.axs_base(url,data,!0,successfn,errorfn)}):errorfn?errorfn(d):(console.info("into toast"),toast({text:Message(d.meta.code),type:"exception"}))})},$.axs_base=function(url,data,async,successfn,errorfn){console.log(url+":"+JSON.stringify(data)),$.ajax({type:"post",timeout:1e4,url:url,dataType:"json",async:async,crossDomain:!0,contentType:"application/json; charset=utf-8",data:JSON.stringify(data),xhrFields:{withCredentials:!0},success:function(d){console.log(url+":"+JSON.stringify(data)+":"+JSON.stringify(d)),d.meta&&d.meta.success?successfn(d):(d.meta||(d={meta:{code:"99999",msg:"系统异常",success:!1},result:null}),errorfn(d))},error:function(jqXHR,statusTxt,errorThrown){hideLoading(),ajaxErr(jqXHR,statusTxt,errorThrown)}})}});