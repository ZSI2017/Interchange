"use strict";showLoading(),Zepto(function(e){function t(t){var a=template("sendTemplate",t);document.getElementById("sendId").innerHTML=a;var i=template("recpAddressTemplate",t);document.getElementById("recAddressId").innerHTML=i;var o=t.sendName,s=t.recName;e(".data-senderName").html(o),e(".data-recipientsName").html(s)}function a(){return"请选择"!=e("#timeDate").text()&&("请选择"!=e("#goodstype").text()&&(""!=e(".goodsweightNum").val()&&(!!e("#defaultCheckBox").hasClass("defaultSelect")&&(e(".single_btn").removeClass("disabled"),!0))))}function i(){var t=[],i=e(".extra_service div");if(console.log("vclassArr.length: "+i.length),i&&0!=i.length){for(var r=0;r<i.length;r++)e(i[r]).hasClass("express_active_change")&&t.push(e(i[r]).text());t=t.join(",")}else t="1";console.log(t);var d=emojione.toShort(e("#text-content").val()).replace(/\:[a-z0-9_]+\:/g,"");if("其他要求请在此备注(选填)"==d&&(d=""),ant.setSessionData({data:{addServiceArr:t,remarkContent:d}}),a()){console.log("productTypeCode"+N);var l={logisMerchLog:I,senderAddrID:-1==JSON.parse(p)?0:JSON.parse(p),reciptiensAddrID:-1==JSON.parse(u)?0:JSON.parse(u),productTypeCode:N,discount:JSON.parse(C),logisMerchId:JSON.parse(s),productId:JSON.parse(n),snderName:T,snderMobile:e(".data-senderNumber").attr("real-sendnumber"),snderPrvnCode:e(".data-senderName").attr("data-provinceNo"),snderCityCode:e(".data-senderName").attr("data-cityNo"),snderDstrCode:e(".data-senderName").attr("data-areaNo"),snderStreet:"",snderAddress:e(".data-detailaddress").text(),rcvrName:k,rcvrMobile:e(".data-recipientsNumber").attr("real-recNumber"),rcvrPrvnCode:e(".data-recipientsName").attr("data-recprovinceNo"),rcvrCityCode:e(".data-recipientsName").attr("data-reccityNo"),rcvrDstrCode:e(".data-recipientsName").attr("data-recareaNo"),rcvrStreet:"",rcvrAddress:e(".data-redetailaddress").text(),bookedDay:"今天"==e(".day1").val()?"TDY":"明天"==e(".day1").val()?"TOM":"AFT",bookedTime:e(".time1").val(),goodsType:e("#goodstype").text(),goodsWeight:1e3*e(".goodsweightNum").val(),remark:d,addService:t,estimatePrice:100*JSON.parse(e(".estimatePrice-data").text())};console.log("info +"+JSON.stringify(l)),console.log("senderAddrID "+JSON.parse(p));var c=jUrl+"/ep/order/save";isNetworkAvailable||(J=!0,e(".single_btn").removeClass("loading"),e(".single_btn").html("立即下单")),e.axs(c,l,function(t){if(e(".single_btn").removeClass("loading"),e(".single_btn").html("立即下单"),"0000"==t.meta.code){var t=t.result.orderNo;if(t&&""!=t)var a=t;pushWindow("scuess-order.html?orderNo="+a,!1)}else ant.pushWindow({url:"single-failure.html?epCompanyName="+o})},function(t){if(J=!0,e(".single_btn").removeClass("loading"),e(".single_btn").html("立即下单"),"1820"==t.meta.code)J=!0,e(".single_btn").removeClass("loading"),e(".single_btn").html("立即下单"),setTimeout(function(){notPaidOrder(t.result.notPaidOrderNo,t.result.notPaidRemindCnt)},10);else if("1810"==t.meta.code)toast({text:"预约取件时间无效",type:"exception"});else if("1812"==t.meta.code)J=!0,e(".single_btn").removeClass("disabled"),ant.getSessionData({keys:["epCompanyName"]},function(e){o=e.data.epCompanyName,BizLog.call("info",{spmId:"a106.b2109.c4855",actionId:"exposure",params:{CompName:o}})}),e(".dialog-num").show();else if("1813"==t.meta.code)toast({text:"快递公司下单失败",type:"exception"});else if("1817"==t.meta.code){var a=t.result.times;z.initselectDateEvent(a),toast({text:"请重新确认上门时间"})}else toast({text:"创建订单失败，请重试",type:"exception"})})}}FastClick.attach(document.body);var o,s,n,r,d,l,c,m,p,u,g,h,f,v,b,y,x,C,N,I,k,T,S,_,w=!0,O=[],D=getUrlParam("isCompanyService")||"",A=/^[0-9\.]+/g,J=!0,P=!1;ant.setSessionData({data:{fromInformation:"0"}}),ant.on("resume",function(t){P=!0,J=!0,e(".single_btn").removeClass("loading"),e(".single_btn").html("立即下单"),e(".single_btn").click(function(){e(".single_btn").hasClass("disabled")||ant.getSessionData({keys:["fromInformation"]},function(t){P&&"1"==t.data.fromInformation&&(e(".once_order").html(""),e(".once_order_html").html('<div class="am-dialog-wrap" role="document" style="margin-top:0.25rem;padding:.13rem 0 .15rem;"><div class="am-dialog-img"><img src="https://expressprod.oss-cn-hangzhou.aliyuncs.com/mobile/img/cancelWarning.png" alt="图片描述"></div><div class="am-dialog-body" style="padding:0.02rem 0.2rem 0;margin:0 auto;"><p class="am-dialog-brief" style="font-size:0.15rem;color:black">你刚才已经下单成功<br/>确定再下一单吗？</p></div><div class="am-dialog-footer" style="padding-top:0.15rem;"><a class="am-dialog-button continue_order" role="button" style="border:1px solid #108ee9;border-radius:5px;margin-right:0.05rem;color:#108ee9;height:.41rem;line-height:1">仍然下单</a><a class="am-dialog-button Ierror" role="button" style="background:#108ee9;color:#fff;border-radius:5px;margin-left:0.05rem;height:.41rem;line-height:1">我点错了</a></div></div>'))})})}),function(){ant.getSessionData({keys:["filterCompanyId","epCompanyId","sendAreaCode","recAreaCode","epCompanyName","cityCode","productTypeId","presetWeight","presetWeightPrice","extraWeightUnit","extraWeightPrice","epCompanyId","reciptiensAddrID","recName","recNumber","recProvinceCode","recCityCode","recAreaCode","recStreet","recAddress","senderAddrID","sendName","sendNumber","real_sendNumber","real_recNumber","sendProvinceCode","sendCityCode","real_sendName","real_recName","sendAreaCode","sendStreet","sendAddress","dayValue","timeValue","timeDate","goodstypeValue","goodsOneValue","goodsOneIndex","addServiceArrs","remarkContent","epCompanyNo","acceptOrderFrom","acceptOrderTo","merchantName","imgsrc","addressGoodsOneValue","addressGoodsOneIndex","addressDayValue","addressTimeValue"]},function(i){_=i.data.filterCompanyId,S=i.data.sendAddress,T=i.data.real_sendName,k=i.data.real_recName,c=i.data.sendAreaCode,m=i.data.recAreaCode,s=i.data.epCompanyId,o=i.data.epCompanyName,n=i.data.productTypeId,r=i.data.epCompanyNo,d=i.data.acceptOrderFrom,l=i.data.acceptOrderTo,p=i.data.senderAddrID,u=i.data.reciptiensAddrID,I=i.data.imgsrc,i.data.cityCode,ant.call("setTitle",{title:"完善寄件信息"}),t(i.data);var w=(i.data.dayValue,i.data.timeValue,i.data.timeDate,i.data.goodstypeValue,i.data.addressGoodsOneValue||""),J=i.data.addressGoodsOneIndex||"",P=i.data.addressDayValue||"",W=i.data.addressTimeValue||"",M=(i.data.goodsOneValue,i.data.goodsOneIndex,i.data.addServiceArrs||""),B=i.data.remarkContent||"";!function(t,i,s,r,d,l,c,m,p,u,k,T,w,J,F,M){J?(e("#text-content").val(J),e("#text-content").css("color","#000")):(e("#text-content").val("其他要求请在此备注(选填)"),e("#text-content").css("color","#ccc")),a();var B={snderAddress:S,logisMerchCode:t,acceptOrderFrom:d,acceptOrderTo:l,logisMerchId:parseInt(i),snderDstrCode:s,rcvrDstrCode:r,bookedDay:"今天"==P?"TDY":"明天"==P?"TOM":"AFT",bookedHour:A.exec(W)[0],isCompanyService:D};console.log("今天"==P?"TDY":"明天"==P?"TOM":"AFT"),console.log(A.exec(W));var L=jUrl+"/ep/order/index";e.axs(L,B,function(t){if(t.meta.success){var a=t.result,i="";if("2"==a.pricingMode?e(".systemPay").html('实际费用以<span style="color:#f4333c;">快递员当面确认为准</span>，在订单详情页即可完成在线支付，<span style="color:#f4333c;">不支持现金及扫码支付</span>'):e(".systemPay").html('实际费用以<span style="color:#f4333c;">快递员当面确认为准</span>，快递员录入信息后，支付宝会在订单详情生成账单提示支付，<span style="color:#f4333c;">不支持现金及扫码支付</span>'),a&&""!=a){var s=a.servicingText,r=a.goodsTypes,d=a.times,l=a.addServices;if(console.log(D+"isCompanyService"),console.log(d.isService),"1"==D&&"0"==d.isService&&setTimeout(function(){toast({text:"该时段已不可服务，请重新确认时间"})},600),x=JSON.parse(a.goodsMaxWeight),g=a.productTypes,n=a.productTypes[0].productTypeId,h=parseFloat(a.productTypes[0].presetWeight),f=parseFloat(a.productTypes[0].presetWeightPrice),v=parseFloat(a.productTypes[0].extraWeightUnit),b=parseFloat(a.productTypes[0].extraWeightPrice),y=a.productTypes[0].description,C=a.productTypes[0].discount,N=a.productTypes[0].productTypeCode,console.log("初始化选择产品类型"),z.initExpressType(g),console.log("初始化快递公司相关信息"),z.initCompanyInf(I,o,g[0].productTypeName),e("#expressId").html(g[0].productTypeName),e(".priceNum").html(h/1e3+"公斤内"+f/100+"元，每增加"+v/1e3+"公斤加收"+b/100+"元"),e(".goodsweightNum").val(h/1e3),console.log("initWeightData"),z.initWeightData(),F&&""!=F){var c,m=parseFloat(F),p=parseFloat(m)-h/1e3;e("#goodsweight").html(F),e(".goodsweightNum").val(parseFloat(F)),e(".alertInfo").find(".wpWeight").attr("data-weight_id",M.toString()),e(".alertInfo").find(".wpWeight").attr("data-weight_value",F),p<=0?(c=f,c/=100):(c=f+Math.ceil((1e3*m-h)/v)*b,c/=100),e(".estimatePrice-data").html(c.toFixed(2))}console.log("goodsOneValue"),e("#goodstype").text(r[0]),m||(e("#goodsweight").html(O[0]),e(".goodsweightNum").val(parseFloat(O[0])),e(".estimatePrice-data").html((f/100).toFixed(2))),l&&""!=l?(console.log("addService"),e(".extra_service_show").show(),e(".extra_service_txt").show(),e(".extra_service").css("padding-bottom","0.05rem"),e(".kd-info-text").css({"background-color":"#f5f5f9","border-bottom":"0"})):(e(".extra_service_show").hide(),e(".extra_service_txt").hide(),e(".extra_service").css("padding-bottom","0"),e(".remarks-class").css("backgroundSize","0 0,0 0,100% 0px,100% 1px"),e(".kd-info-text").css({"background-color":"#f5f5f9","border-bottom":"0"})),console.log(d),z.initselectDateEvent(d),z.initSelectTypeEvent(r),z.initSelectWeightEvent(O,f,h,v,b),z.initselectExpressType(),e(".timeText").text(s),e.each(l,function(e){for(var t=0;t<w.length;t++)if(w[t]==l[e])var a="express_active_change";else var a="";i+='<div class="'+a+'" data-spmv="a106.b2109.c4629.d7167" style="min-width:0rem;text-align:center;width: 1.46rem;margin: 0.15rem 0rem 0.1rem 0.25rem;border: 1px #888 solid;padding: 0.02rem 0.02rem;line-height: .24rem;margin-top:0rem;">'+l[e]+"</div>"}),e(".extra_service").html(i),e(".extra_service div").click(function(){BizLog.call("info",{spmId:"a106.b2109.c4629.d7167",actionId:"clicked",params:{CompName:o}}),e(this).toggleClass("express_active_change")})}hideLoading()}},function(a){if("3214"==a.meta.code){BizLog.call("info",{spmId:"a106.b2109.c5643",actionId:"exposure"}),hideLoading(),e(".show_mask").show();var i=_;"[object Array]"!==Object.prototype.toString.call(i)&&(i=2==i.length?[]:_.slice(1,_.length-1).split(",")),i.push(t),setTimeout(function(){ant.setSessionData({data:{filterCompanyId:i}}),alert("温馨提示\n抱歉，"+o+"暂时无法服务\n换一家试试吧"),BizLog.call("info",{spmId:"a106.b2109.c5643.d8921",actionId:"clicked"}),e(".show_mask").hide(),ant.popWindow()},100)}else toast({text:a.meta.msg,type:"exception"})})}(r,s,c,m,d,l,0,0,0,0,0,0,M,B,w,J),e("#text-content").focus(function(){BizLog.call("info",{spmId:"a106.b2109.c4629.d7168",actionId:"clicked",params:{CompName:o}}),setTimeout(function(){F=!0,console.log("#text6666 "+F)},600),this.style.color="#000","其他要求请在此备注(选填)"==this.value&&(this.value="")}),e("#text-content").blur(function(){""==this.value&&(this.value="其他要求请在此备注(选填)",this.style.color="#ccc")}),e(".alertInfo").on("click","#selectTime",function(){BizLog.call("info",{spmId:"a106.b2109.c4629.d7164",actionId:"clicked",params:{CompName:o}})}),e(".alertInfo").on("click",".wpType",function(){BizLog.call("info",{spmId:"a106.b2109.c4629.d7165",actionId:"clicked",params:{CompName:o}})}),e(".alertInfo").on("click",".fwType",function(){BizLog.call("info",{spmId:"a106.b2109.c4629.d7331",actionId:"clicked",params:{CompName:o}})}),e(".alertInfo").on("click",".wpWeight",function(){BizLog.call("info",{spmId:"a106.b2109.c4629.d7166",actionId:"clicked",params:{CompName:o}})}),e(".price_rule").on("click",function(){BizLog.call("info",{spmId:"a106.b2109.c4629.d7169",actionId:"clicked",params:{CompName:o}}),e("#text-content").blur(),setTimeout(function(){ant.pushWindow({url:"price-rule.html"})},300)}),e("#defaultCheckBox").click(function(){BizLog.call("info",{spmId:"a106.b2109.c4630.d7170",actionId:"clicked",params:{CompName:o}})}),e(".service_agreement").on("click",function(){BizLog.call("info",{spmId:"a106.b2109.c4630.d7171",actionId:"clicked",params:{CompName:o}})}),e(".single_btn").click(function(){BizLog.call("info",{spmId:"a106.b2109.c4630.d7172",actionId:"clicked",params:{CompName:o}})})})}(),ant.getSessionData({keys:["epCompanyName"]},function(t){o=t.data.epCompanyName,e(".dialog-close-num").click(function(){BizLog.call("info",{spmId:"a106.b2109.c4855.d7604",actionId:"clicked",params:{CompName:o}}),e(".dialog-num").hide(),J=!0,e(".single_btn").removeClass("loading"),e(".single_btn").html("立即下单")}),e("#btn-kefu").click(function(){BizLog.call("info",{spmId:"a106.b2109.c4855.d7605",actionId:"clicked",params:{CompName:o}})}),e("#btn-sumbit").click(function(){BizLog.call("info",{spmId:"a106.b2109.c4855.d7606",actionId:"clicked",params:{CompName:o}}),e(".dialog-num").hide(),J=!0,e(".single_btn").removeClass("loading"),e(".single_btn").html("立即下单")})});var z=new Object({initCompanyInf:function(t,a,i){e("#companyLogo").attr("src",t),e("#companyInfName").html(a),e("#companyInfProductType").html(i)},initWeightData:function(){O=[];console.log(100);for(var e=0;e<100;e++){var t=.5+.5*e;t+=0==e?" 公斤及以下":99==e?" 公斤及以上":" 公斤",O.push(t)}},initExpressType:function(t){var a="";t.map(function(e,t){var i=e.description,o="";"-"!=i&&""!=i||(o="displayNone"),a+='<div  class=" am-list twoline" data-select="0" style="width:100%;padding:0;margin-bottom:.1rem"><div class="am-list-item expressType_border" style="background-size:0;border-radius:.05rem;padding-top:.15rem;min-height:0;padding-bottom:.135rem"><div class="am-list-thumb" data-select="1" style="width:.21rem;height:.21rem;background-size:contain;background-image: url(https://expressprod.oss-cn-hangzhou.aliyuncs.com/mobile/img/noselect.png);background-repeat: no-repeat;"></div><div class="am-list-content" style="margin-left:.05rem"><div class="am-list-title am-flexbox twocolumn" style="margin-bottom:0;line-height:1"><label class="am-flexbox-item" style="color:#000;font-size:.24rem;line-height:.24rem">'+e.productTypeName+'</label><div class="am-list-right-brief" style="color:#f4333c;font-size:.14rem;line-height:.24rem;"><span>'+e.presetWeightPrice/100+'</span><span> 元起</span></div></div><div class="am-list-brief '+o+'"style="white-space:normal;font-size:.14rem;line-height:.2rem;margin-top:0.05rem;margin-bottom:-0.02rem;">'+i+"</div></div></div></div>"}),e(".iosselect-box").html(a)},initselectExpressType:function(){var t=e(".alertInfo").find(".fwType"),a=e("#expressId").html();t.click(function(){J&&(e(".myPop").show(),e("body").on("touchmove",function(e){e.preventDefault()},!1),w&&(w=!1,isAndroid&&e(".iosselect-box").find(".am-list-item").css("border","1px solid #ddd"),e(".iosselect-box").find(".am-list-thumb").eq(0).css({"background-image":"url(https://expressprod.oss-cn-hangzhou.aliyuncs.com/mobile/img/select.png)"}),e(".iosselect-box").find(".am-list").eq(0).attr("data-select","1"),e(".iosselect-box").find(".am-list-item").eq(0).css("border-color","#108ee9"),e(".iosselect-box").find(".am-list:last").css("margin-bottom","0")))}),e(".iosselect-box").find(".am-list").map(function(t,i){e(this).on("click",function(){var t=e(this);"0"==e(this).attr("data-select")&&(t=e(this),e(".iosselect-box").find(".am-list").each(function(){e(this).attr("data-select","0"),e(this).find(".am-list-thumb").css({"background-image":"url(https://expressprod.oss-cn-hangzhou.aliyuncs.com/mobile/img/noselect.png)"}),e(this).find(".am-list-item").css("border-color","#ddd")}),e(this).attr("data-select","1"),e(this).find(".am-list-thumb").css({"background-image":"url(https://expressprod.oss-cn-hangzhou.aliyuncs.com/mobile/img/select.png)"}),e(this).find(".am-list-item").eq(0).css("border-color","#108ee9")),a=t.find("label").html(),e("#expressId").html(a),e("#companyInfProductType").html(a);var i=e(this).index();n=g[i].productTypeId,h=parseFloat(g[i].presetWeight),f=parseFloat(g[i].presetWeightPrice),v=parseFloat(g[i].extraWeightUnit),b=parseFloat(g[i].extraWeightPrice),y=g[i].description,C=parseFloat(g[i].discount),N=g[i].productTypeCode,e(".priceNum").html(h/1e3+"公斤内"+f/100+"元，每增加"+v/1e3+"公斤加收"+b/100+"元");var o=parseFloat(e("#goodsweight").html()),s=f+Math.ceil((1e3*o-h)/v)*b;s/=100,e(".estimatePrice-data").html(s.toFixed(2)),setTimeout(function(){e(".myPop").hide(),e("body").off("touchmove")},200)})}),e(".myPop").find(".close").click(function(){e(".myPop").hide(),e("body").off("touchmove")}),e(".myPop").find(".sure").click(function(){e(".myPop").hide(),e("body").off("touchmove"),e("#companyInfProductType").html(a),e("#expressId").html(a)})},initselectDateEvent:function(t){console.log(t);var a=t,i="",o="";for(value in a)Array.isArray(a[value])&&a[value].some(function(e,t){return e.hasOwnProperty("isChecked")&&"1"==e.isChecked})&&(o=value);a[o].some(function(e,t){return i=e.time,e.hasOwnProperty("isChecked")&&"1"==e.isChecked}),console.log(o),console.log(i),"TDY"!=o?e("#timeDate").css("color","#f4333c"):e("#timeData").css("color","#888");var s="<span style='padding-left:.05rem;'></span>";e("#timeDate").html(JSON.parse(JSON.stringify(("TDY"==o?"今天":"TOM"==o?"明天":"后天")+s+i))),e(".day1").val(JSON.parse(JSON.stringify("TDY"==o?"今天":"TOM"==o?"明天":"后天"))),e(".time1").val(JSON.parse(JSON.stringify(i)));var n=(document.querySelector("#dateId"),document.querySelector("#timeId"),this);e(".alertInfo").find("#selectTime").unbind().click(function(){if(J){e(".newDate").show(),e("body").on("touchmove",function(e){e.preventDefault()},!1),n.initDateTimes(),e(".dataItem").each(function(t){a[0===t?"TDY":1===t?"TOM":"AFT"].every(function(e,t){return"1"!=e.status})?(e(this).addClass("clickDisabled"),e(this).find("img").hide(),e(this).find("span").html(e(this).find("span").html().replace("约满","")+"约满")):(e(this).removeClass("clickDisabled"),e(this).find("img").hide(),e(this).find("span").html(e(this).find("span").html().replace("约满","")))});var t="今天"==e(".day1").val()?"TDY":"明天"==e(".day1").val()?"TOM":"AFT",o=e(".time1").val(),s=(e(".dataItem").eq(0),"TDY"===t?0:"TOM"===t?1:2),r="";e(".dataItem").css("borderColor","#ddd"),e(".dataItem").eq(s).find("img.imgSelect").show(),e(".dataItem").eq(s).css("borderColor","#108ee9"),a[t].forEach(function(e,t){var a=format('<button style="float:left;padding:0;font-size:.14rem;margin-bottom:12px;width:1.08rem;height:.42rem;line-height:1" class="am-button                                      {0}"                                     {1}>                                     <span>{3}</span>                                     <p {4}                                     >{2}</p>                                     </button>',o===e.time?"":"white","1"==e.status?"":"disabled",e.time,"2"==e.status?"约满":"","2"==e.status?'style="padding-top:.03rem;"':"");r+=a}),e(".times").html(r),e(".times button").unbind().click(function(t){i=e(this).find("p").html(),e(".times button").addClass("white"),e(this).removeClass("white")})}}),e(".dataItem").unbind().click(function(){if(!e(this).hasClass("clickDisabled")){e(".dataItem").find("img.imgSelect").hide(),e(".dataItem").css("borderColor","#ddd"),e(this).find("img.imgSelect").show(),e(this).css("borderColor","#108ee9");var t=0===e(this).index()?"TDY":1===e(this).index()?"TOM":"AFT";o=t;var s="";a[t].forEach(function(e,t){var a=format('<button style="float:left;padding:0;font-size:.14rem;margin-bottom:12px;width:1.08rem;height:.42rem;line-height:1" class="am-button                  {0}"                 {1}>                 <span>{3}</span>                 <p {4}                 >{2}</p>                 </button>',(e.hasOwnProperty("isChecked")&&e.isChecked,"white"),"1"===e.status?"":"disabled",e.time,"2"===e.status?"约满":"","2"===e.status?'style="padding-top:.03rem;"':"");s+=a}),e(".times").html(s),a[t].some(function(t,a){return"1"===t.status&&(e(".times button").eq(a).removeClass("white"),i=t.time),"1"===t.status})||(i=""),e(".times button").unbind().click(function(t){i=e(this).find("p").html(),e(".times button").addClass("white"),e(this).removeClass("white")})}}),e(".newDate").find(".close").unbind().click(function(){e(".newDate").hide(),e("body").off("touchmove")}),e(".newDate").find(".sure").unbind().click(function(){""!==i&&(e(".time1").val(JSON.parse(JSON.stringify(i))),e(".day1").val(JSON.parse(JSON.stringify("TDY"==o?"今天":"TOM"==o?"明天":"后天"))),e("#timeDate").html(JSON.parse(JSON.stringify(("TDY"==o?"今天":"TOM"==o?"明天":"后天")+s+i))),"TDY"!=o?e("#timeDate").css("color","#f4333c"):e("#timeDate").css("color","#888")),e(".newDate").hide(),e("body").off("touchmove")})},initDateTimes:function(){function t(e,t){var a=new Date(e);return a.setDate(a.getDate()+t),a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate()}!function(e){window.AlipayJSBridge?e&&e():document.addEventListener("AlipayJSBridgeReady",e,!1)}(function(){AlipayJSBridge.call("getServerTime",function(a){e(".dataItem p").each(function(i){e(this).html(t(a.time,i))})})})},initSelectTypeEvent:function(t){var i=document.querySelector("#typeId"),o=e(".alertInfo").find(".wpType");o.click(function(){if(J){for(var s=o.attr("data-type_id"),n=(o.attr("data-type_value"),[]),r=0;r<t.length;r++)n.push({id:r.toString(),value:t[r]});var d={title:"",itemHeight:35,headerHeight:42,cssUtil:"px",oneLevelId:s,callback:function(t){i.value=t.id,o.attr("data-type_id",t.id),o.attr("data-type_value",t.value),e("#goodstype").text(JSON.parse(JSON.stringify(t.value))),ant.setSessionData({data:{goodstypeValue:JSON.parse(JSON.stringify(t.value))}}),a()}};new IosSelect(1,[n],d)}})},initSelectWeightEvent:function(){var t=document.querySelector("#weightId"),i=e(".alertInfo").find(".wpWeight");i.click(function(){if(J){for(var o=i.attr("data-weight_id"),s=(i.attr("data-weight_value"),[]),n=0;n<O.length;n++)s.push({id:n.toString(),value:O[n]});var r={title:"",itemHeight:35,headerHeight:42,cssUtil:"px",oneLevelId:o,callback:function(o){if(t.value=o.id,i.attr("data-weight_id",o.id),i.attr("data-weight_value",o.value),""==o.id){var s=1e3*parseFloat(O[0]),n=f+Math.ceil((s-h)/v)*b;n/=1e3,e(".estimatePrice-data").html(n.toFixed(2))}else{e("#goodsweight").text(JSON.parse(JSON.stringify(o.value)));var r=parseFloat(o.value),n=f+Math.ceil((1e3*r-h)/v)*b;n/=100,console.log("presetWeightPricePec :"+f),console.log("Math.ceil((weight * 1000 - presetWeight) / extraWeightUnitPec): "+Math.ceil((1e3*r-h)/v)),e(".goodsweightNum").val(r),e(".estimatePrice-data").html(n.toFixed(2)),ant.setSessionData({data:{goodsOneValue:JSON.parse(JSON.stringify(o.value)),goodsOneIndex:JSON.parse(JSON.stringify(o.value)),addressGoodsOneValue:JSON.parse(JSON.stringify(o.value)),addressGoodsOneIndex:JSON.parse(JSON.stringify(o.id))}})}a()}};new IosSelect(1,[s],r)}})}}),W=!1,F=!1;e("#text-content").bind("compositionstart",function(){console.log(" into compositionstart"),W=!0}),e("#text-content").bind("compositionend",function(){console.log(" into compositionend");var t=emojione.toShort(e(this).val());if(e(this).val(t.replace(/\:[a-z0-9_]+\:/g,"")),e(this).val().length>=51){var a=e(this).val().slice(0,50);e(this).val(a),e(".am-toast").show(),setTimeout(function(){e(".am-toast").hide()},800)}W=!1}),e("#text-content").bind("input",function(){if(console.log("into input"+W),!W){var t=emojione.toShort(e(this).val());if(e(this).val(t.replace(/\:[a-z0-9_]+\:/g,"")),e(this).val().length>=51){var a=e(this).val().slice(0,50);e(this).val(a),e(".am-toast").show(),setTimeout(function(){e(".am-toast").hide()},800)}}}),e("#text-content").bind("blur",function(){F=!1}),isAndroid&&e(window).on("scroll",function(t){console.log(F),F&&(console.log("dasdfa"),e("#text-content").blur())},!1),e("#defaultCheckBox").find("span").css({"background-image":"url(https://expressprod.oss-cn-hangzhou.aliyuncs.com/mobile/img/default-select.png)"}),e("#defaultCheckBox").click(function(){e(this).hasClass("defaultSelect")?(e(this).toggleClass("defaultSelect"),e(".single_btn").addClass("disabled"),e(this).find("span").css({"background-image":"url(https://expressprod.oss-cn-hangzhou.aliyuncs.com/mobile/img/default-noSelect.png)"})):(e(this).toggleClass("defaultSelect"),a()&&e(".single_btn").removeClass("disabled"),e(this).find("span").css({"background-image":"url(https://expressprod.oss-cn-hangzhou.aliyuncs.com/mobile/img/default-select.png)"}))}),e(".single_btn").click(function(){e(".single_btn").hasClass("disabled")||e(".once_order").show()}),e(document).on("click",".continue_order",function(){e(".once_order_two").show()}),e(document).on("click",".Ierror",function(){e(".once_order").hide()}),e(document).on("click",".Iknow",function(){if(BizLog.call("info",{spmId:"a106.b2109.c5305.d8437",actionId:"clicked"}),e(".once_order").hide(),e(".once_order_two").hide(),console.log("enableButton "+J),J){if(e(".single_btn").hasClass("disabled"))return;J=!1,e(".single_btn").addClass("loading"),e(".single_btn").attr("role","alert"),e(".single_btn").attr("aria-live","assertive"),e(".single_btn").html('<i class="icon" aria-hidden="true"></i>加载中...'),setTimeout(function(){J=!0,e(".single_btn").removeClass("loading"),e(".single_btn").html("立即下单")},7e3),i()}}),e(".service_agreement").on("click",function(){e("#text-content").blur(),setTimeout(function(){ant.pushWindow({url:"service-agreement.html"})},300)})});