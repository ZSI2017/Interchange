"use strict";function _defineProperty(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}Zepto(function(e){function t(){showLoading();var t={},a=jUrl+"/ep/receiver/list";e.axs(a,t,function(t){if(hideLoading(),t.meta.success){e(".manage-bottom").show();var a=t.result,r="",d="";if(a&&ant.setSessionData({data:{receiverCount:a.length}}),a&&a.length>0){e(".manageInfoRec-select").show(),e(".emptyInfoRec").hide();for(var c=0;c<a.length;c++){var n=getAreaNameByCode(a[c].districtCode).replace(/\s/g,"");r="1"==a[c].defaultStatus?'<span class="setDefaultRec" style="vertical-align: super;" data-senderAddrID=1 reciptiensAddrID="'+a[c].id+'"><img src="https://expressprod.oss-cn-hangzhou.aliyuncs.com/mobile/img/selected.png" style="float:left;width: .16rem;height: .16rem;margin-right: .055rem;"><span class="am-list-title" style="float:left;color:#108ee9;font-size:.12rem">默认地址</span></span>':'<span class="setDefaultRec" style="vertical-align: super;" data-senderAddrID=0 reciptiensAddrID="'+a[c].id+'"><img src="https://expressprod.oss-cn-hangzhou.aliyuncs.com/mobile/img/unselected.png"  style="float:left;width: .16rem;height: .16rem;margin-right: .055rem;"><span class="am-list-title" style="float:left;font-size:.12rem;color:#999;">设为默认</span></span>';d+='<div class="am-list twoline" style="padding: .0rem;padding-bottom: 0.08rem;padding-top:1px;"><div class="am-list-body" style="padding-top:1px;"><div class="am-list-item"><div class="am-list-content"><div class="am-list-title"  style="margin-bottom:0"><label style="font-size:.17rem;color: #999;">'+a[c].name+'</label><span style="font-size:.17rem;float:right;color: #999;">'+a[c].mobile+'</span></div><div class="am-list-brief selectsender_content"><label style="font-size:.14rem;color: #333;">'+n+a[c].address+'</label></div></div></div><div class="am-list-item oneline" style="padding:0.065rem 0.16rem 0.06rem 0.16rem;"><div class="am-list-content">'+r+'</div><div class="am-list-right-brief" style="margin-right:.005rem;"><span class="am-ft-black editRec" style="font-size:.13rem;" detailAddress="'+a[c].address+'" provinceNo="'+a[c].provinceCode+'" cityNo="'+a[c].cityCode+'" areaNo="'+a[c].districtCode+'" street="'+a[c].street+'" recipientsName="'+a[c].name+'" real-recipientsName="'+a[c].realName+'" recipientsNumber="'+a[c].mobile+'" real-recipientsNumber="'+a[c].realMobile+'" defaultStatus="'+a[c].defaultStatus+'" reciptiensAddrID="'+a[c].id+'"><img src="https://expressprod.oss-cn-hangzhou.aliyuncs.com/mobile/img/edit.png" style="margin-right:.045rem;width: .16rem;float:left;height: .16rem;"" /><span style="float:left;line-height:.16rem;font-size:.12rem;color:#999">编辑</span></span><span class="am-ft-black delRec" style="font-size:.13rem;" reciptiensAddrID="'+a[c].id+'"><img src="https://expressprod.oss-cn-hangzhou.aliyuncs.com/mobile/img/del.png" style="margin-right:.05rem;width: .16rem;float:left;padding-left: .205rem;height: .16rem;"" /><span style="float:left;line-height:.16rem;font-size:.12rem;color:#999">删除</span></span></div></div></div></div>'}e(".manageInfoRec-select").html(d),e(".icon-check-Rec").on("touchend",function(){e(".icon-check-Rec").parent().find("input[name='sendRadioRec']").attr("checked",!1),e(this).parent().find("input[name='sendRadioRec']").attr("checked",!0)}),e(".setDefaultRec").click(function(t){t.preventDefault();var s=e(this),a=s.attr("reciptiensAddrID"),r=e(".setDefaultRec").index(this)+1;if("1"==e(this).attr("data-senderAddrID")){e(this).attr("data-senderAddrID","0"),e(this).find("img").attr("src","https://expressprod.oss-cn-hangzhou.aliyuncs.com/mobile/img/unselected.png"),e(this).find(".am-list-title").css({color:"#999"}),e(this).find(".am-list-title").html("设为默认");var r=e(".setDefaultRec").index(this)+1;e(this).attr("data-spmv","a106.b2127.c4690_"+r+".d7322"),BizLog.call("info",{spmId:"a106.b2127.c4690_"+r+".d7322",actionId:"clicked",params:{AddrID:a}})}else e(".setDefaultRec").map(function(){e(this).attr("data-senderAddrID","0"),e(this).find("img").attr("src","https://expressprod.oss-cn-hangzhou.aliyuncs.com/mobile/img/unselected.png"),e(this).find(".am-list-title").css({color:"#999"}),e(this).find(".am-list-title").html("设为默认")}),e(this).attr("data-senderAddrID","1"),e(this).find("img").attr("src","https://expressprod.oss-cn-hangzhou.aliyuncs.com/mobile/img/selected.png"),e(this).find(".am-list-title").css({color:"#108ee9"}),e(this).find(".am-list-title").html("默认地址"),e(this).attr("data-spmv","a106.b2127.c4690_"+r+".d7319"),BizLog.call("info",{spmId:"a106.b2127.c4690_"+r+".d7319",actionId:"clicked",params:{AddrID:a}});i(a,e(this).parents(".oneline"))}),e(".editRec").click(function(t){var i=e(this).attr("reciptiensAddrID"),s=e(".editRec").index(this)+1;e(this).attr("data-spmv","a106.b2127.c4690_"+s+".d7320"),BizLog.call("info",{spmId:"a106.b2127.c4690_"+s+".d7320",actionId:"clicked",params:{AddrID:i}}),t.preventDefault();var i=e(this).attr("reciptiensAddrID"),a=(e(this).attr("recipientsName"),e(this).attr("real-recipientsName")),r=e(this).attr("real-recipientsNumber"),d=e(this).attr("detailAddress"),c=e(this).attr("provinceNo"),n=e(this).attr("cityNo"),l=e(this).attr("areaNo"),o=getAreaNameByCode(l).replace(/\s/g,"");ant.setSessionData({data:{edit_reciptiensAddrID:i,edit_recName:a,edit_recNumber:r,edit_recAddress:d,edit_recProvinceCode:c,edit_recCityCode:n,edit_recAreaCode:l,edit_recStreet:o}}),pushWindow("recipient-address.html?edit=edit",!0)}),e(".delRec").click(function(t){var i=e(this).attr("reciptiensAddrID"),a=e(".delRec").index(this)+1;e(this).attr("data-spmv","a106.b2127.c4690_"+a+".d7321"),BizLog.call("info",{spmId:"a106.b2127.c4690_"+a+".d7321",actionId:"clicked",params:{AddrID:i}}),t.preventDefault();var i=e(this).attr("reciptiensAddrID");s(i)})}else e(".manageInfoRec-select").hide(),e(".emptyInfoRec").show()}})}function i(t,i){var s="1";"0"==i.find(".setDefaultRec").attr("data-senderAddrID")&&(s="0"),i=i.find(".editRec");var a={receiverId:JSON.parse(t),defaultStatus:s};console.info(JSON.stringify(a));var r=jUrl+"/ep/receiver/set_default";e.axs(r,a,function(e){e.meta.success&&ant.getSessionData({keys:["reciptiensAddrID"]},function(e){e.data.reciptiensAddrID||ant.setSessionData({data:{reciptiensAddrID:i.attr("reciptiensAddrID"),recName:i.attr("recipientsName"),recNumber:i.attr("recipientsNumber"),recAddress:i.attr("detailAddress"),recProvinceCode:i.attr("provinceNo"),recCityCode:i.attr("cityNo"),recAreaCode:i.attr("areaNo"),recStreet:getAreaNameByCode(i.attr("areaNo")).replace(/\s/g,"")}})})})}function s(i){if(confirm("确认删除?")){BizLog.call("info",{spmId:"a106.b2127.c4691.d7324",actionId:"clicked",params:{AddrID:i}});var s={receiverId:JSON.parse(i)},a=jUrl+"/ep/receiver/delete";e.axs(a,s,function(e){e.meta.success&&(toast({text:"删除成功",type:"success"}),t(),ant.getSessionData({keys:["reciptiensAddrID"]},function(e){i==e.data.reciptiensAddrID&&ant.setSessionData({data:_defineProperty({reciptiensAddrID:"",recName:"",recNumber:"",recProvinceCode:"",real_recName:"",real_recNumber:"",recCityCode:"",recAreaCode:"",recStreet:"",recAddress:""},"recStreet","")})}))})}else BizLog.call("info",{spmId:"a106.b2127.c4691.d7323",actionId:"clicked",params:{AddrID:i}}),console.log("取消删除！")}FastClick.attach(document.body),ant.call("setTitle",{title:"管理收件人地址"}),e(".btn-recipient-select").click(function(){BizLog.call("info",{spmId:"a106.b2127.c4689.d7318",actionId:"clicked"}),pushWindow("recipient-address.html",!0)}),ant.on("resume",function(e){t(),ant.setSessionData({data:{edit_reciptiensAddrID:"",edit_recName:"",edit_recNumber:"",edit_recProvinceCode:"",edit_recCityCode:"",edit_recAreaCode:"",edit_recStreet:"",edit_recAddress:""}})}),t()});